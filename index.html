<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>ARBA ISTANBUL RESTAURANT</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700;800&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#8B0E13;
  --white:#ffffff;
  --text:#ffffff;
  --muted: rgba(255,255,255,.78);

  --stroke: rgba(255,255,255,.18);
  --shadow: rgba(0,0,0,.22);

  --r-lg:24px;
  --r-md:22px;

  --vh: 1vh;
  --sticky-h: 86px;

  /* ‚úÖ –∫—Ä–∞—Å–Ω—ã–π –∞–∫—Ü–µ–Ω—Ç –¥–ª—è active */
  --accent:#8B0E13;
}

*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
html,body{height:100%;}
body{
  margin:0;
  font-family:'Montserrat',sans-serif;
  background:var(--bg);
  color:var(--text);
  min-height: calc(var(--vh) * 100);
  overflow-y:auto;
  overflow-x:hidden;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-y: none;
  padding-bottom: calc(var(--sticky-h) + 16px);
  -webkit-text-size-adjust:100%;
}
.page{max-width:560px;margin:0 auto;}

/* header */
.header{
  padding:16px 12px 26px;
  background:linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
  border-bottom:1px solid rgba(255,255,255,.14);
  box-shadow:0 12px 26px rgba(0,0,0,.24);
  display:flex;align-items:center;justify-content:center;
  position:relative;text-align:center;
}
.header img{
  position:absolute;left:12px;
  width:84px;height:84px;object-fit:contain;
  border-radius:18px;
  background:rgba(255,255,255,.10);
  padding:8px;
  border:1px solid rgba(255,255,255,.20);
  box-shadow:0 14px 30px rgba(0,0,0,.22);
}

.brand-wrap{display:flex;flex-direction:column;align-items:center;gap:4px;transform: translateX(16px);}
.brand-title{
  font-family:"Georgia","Times New Roman",Times,serif;
  font-size:30px;line-height:1;letter-spacing:.5px;font-weight:800;
}
.brand-title2{
  font-family:'Montserrat',sans-serif;
  font-weight:900;
  font-size:14px;
  letter-spacing:1.6px;
  line-height:1.15;
}
.brand-slogan{display:none;}
.brand-phone{margin-top:2px;display:flex;flex-direction:column;gap:2px;}
.brand-phone a{color:#fff;text-decoration:none;font-size:14px;font-weight:800;opacity:.95;}

/* ‚úÖ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ */
.welcome{
  margin-top:6px;
  font-weight:900;
  font-size:13px;
  opacity:.92;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(0,0,0,.10);
}

/* header actions smaller */
.header-actions{
  position:absolute;right:8px;top:12px;bottom:12px;
  display:flex;flex-direction:column;justify-content:space-between;align-items:flex-end;
  z-index:90;
}
.act-btn{
  width:32px;height:32px;border-radius:12px;
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;user-select:none;
  background:rgba(255,255,255,.95);
  border:1px solid rgba(255,255,255,.65);
  box-shadow: inset 0 0 0 2px rgba(255,255,255,.50), 0 8px 18px rgba(0,0,0,.14);
  transition:.15s;
}
.act-btn:active{transform:scale(.97);}
.burger{width:18px;height:12px;position:relative;}
.burger span{position:absolute;left:0;right:0;height:2.6px;border-radius:10px;background:#1b1b1b;opacity:.9;}
.burger span:nth-child(1){top:0;}
.burger span:nth-child(2){top:4.8px;}
.burger span:nth-child(3){bottom:0;}
.act-ico{font-size:14px;line-height:1;color:#1b1b1b;}

/* rows */
.langs,.types,.payments{
  display:flex;
  gap:10px;
  padding:12px;
  justify-content:center;
  flex-wrap:nowrap;
  overflow-x:auto;
  -webkit-overflow-scrolling:touch;
}

/* base button */
.btn{
  padding:12px 18px;
  border-radius:28px;
  font-weight:900;
  min-width:112px;
  text-align:center;
  cursor:pointer;
  transition:.15s;
  border:1px solid rgba(255,255,255,.28);
  background:#ffffff;
  color:#8B0E13;
  box-shadow: 0 10px 22px rgba(0,0,0,.18);
  flex:0 0 auto;
}
.btn:active{transform:scale(.98);}

/* ‚úÖ active = –∫—Ä–∞—Å–Ω–∞—è */
.btn.active{
  background: var(--accent);
  color: #ffffff;
  border:1px solid rgba(255,255,255,.42);
  box-shadow: 0 14px 26px rgba(0,0,0,.22);
}

/* category buttons */
.cat-btn{padding:12px 18px;min-width:132px;font-size:14px;border-radius:999px;}

/* ‚úÖ language buttons narrower + flags */
.langs .btn{
  min-width:92px;
  padding:10px 12px;
  border-radius:22px;
  font-size:13.5px;
}
.lang-flag{margin-right:8px; font-size:16px; line-height:1;}

/* ‚úÖ payments narrower */
.payments .btn{
  min-width:84px;
  padding:9px 10px;
  border-radius:20px;
  font-size:13px;
}
.payments .btn.copy-btn{
  min-width:auto;
  padding:10px 12px;
  border-radius:14px;
}

/* inputs */
.input{
  margin:8px auto;display:block;padding:14px;width:85%;
  border-radius:22px;font-size:15px;border:1px solid rgba(255,255,255,.22);
  background:rgba(255,255,255,.94);
  box-shadow: 0 10px 22px rgba(0,0,0,.18);
  outline:none;transition:.15s;
  color:#2b2b2b;
}

/* categories + products */
.categories{display:flex;gap:12px;padding:14px;overflow-x:auto;scroll-behavior:smooth;-webkit-overflow-scrolling:touch;overscroll-behavior-x:contain;}
.products{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;padding:12px;}
.card{
  border-radius:24px;padding:12px;text-align:center;
  background:rgba(255,255,255,.94);
  border:1px solid rgba(255,255,255,.22);
  box-shadow: 0 12px 26px rgba(0,0,0,.18);
  transition:.15s;
  color:#1d1d1d;
}
.img{height:170px;display:flex;align-items:center;justify-content:center;margin-bottom:6px;}
/* ‚úÖ —Ñ–æ—Ç–æ –±–ª—é–¥ –∑–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ */
.img img{max-width:150px;max-height:150px;object-fit:cover;transform:scale(1.06);cursor:pointer;border-radius:18px;}
.item-name{margin-top:2px;padding:0 6px;font-weight:900;line-height:1.15;min-height:42px;display:flex;align-items:center;justify-content:center;word-break:break-word;}
.price{font-weight:900;color:#8B0E13;margin-top:6px;}
.price small{font-weight:800;opacity:.75;margin-left:4px;}
.counter{display:flex;justify-content:center;gap:10px;margin-top:8px;align-items:center;}
.counter button{
  width:32px;height:32px;border-radius:50%;cursor:pointer;border:1px solid rgba(255,255,255,.35);
  background:#8B0E13;color:#fff;font-size:18px;font-weight:900;box-shadow:0 12px 24px rgba(0,0,0,.18);
  transition:.15s;
}
.counter button:active{transform:scale(.96);}

/* carousels */
.popular-wrap{width:100%;padding:4px 12px 6px;}
.popular-title{width:100%;font-weight:900;padding:8px 2px 10px;display:flex;align-items:center;gap:8px;color:#fff;}
.popular-row,.mini-row{display:flex;gap:12px;overflow-x:auto;padding:2px 2px 10px;-webkit-overflow-scrolling:touch;}
.pop-card,.mini-card{
  min-width:150px;border-radius:24px;padding:10px;
  background:rgba(255,255,255,.94);
  border:1px solid rgba(255,255,255,.22);
  box-shadow: 0 12px 26px rgba(0,0,0,.18);
  cursor:pointer;transition:.15s;position:relative;
  color:#1d1d1d;
}
.pop-img,.mini-img{height:86px;border-radius:18px;overflow:hidden;display:flex;align-items:center;justify-content:center;background:rgba(139,14,19,.10);cursor:pointer;}
/* ‚úÖ —Ñ–æ—Ç–æ –≤ –∫–∞—Ä—É—Å–µ–ª—è—Ö –∑–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ */
.pop-img img,.mini-img img{width:100%;height:100%;object-fit:cover;border-radius:18px;}
.pop-name{font-weight:900;margin-top:8px;}
.pop-price,.mini-price{font-weight:900;color:#8B0E13;margin-top:4px;}
.pop-counter,.mini-counter{display:flex;align-items:center;justify-content:center;gap:10px;margin-top:8px;}
.pop-counter button,.mini-counter button{
  width:30px;height:30px;border-radius:50%;cursor:pointer;border:1px solid rgba(255,255,255,.35);
  background:#8B0E13;color:#fff;font-size:18px;font-weight:900;box-shadow:0 12px 24px rgba(0,0,0,.18);
}
.mini-card{min-width:132px;border-radius:22px;}
.mini-counter button{width:28px;height:28px;}
.mini-name{font-weight:900;margin-top:8px;font-size:12px;line-height:1.15;min-height:28px;}
.pop-counter span,.mini-counter span{font-weight:900; min-width:18px; text-align:center;}

/* ‚úÖ –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–π –±–µ–π–¥–∂ (–≤–º–µ—Å—Ç–æ —ç–º–æ–¥–∑–∏) */
.badge-pill{
  position:absolute;left:10px;top:10px;
  padding:6px 8px;
  border-radius:999px;
  font-size:11px;
  font-weight:900;
  color:#fff;
  background:rgba(139,14,19,.92);
  border:1px solid rgba(255,255,255,.30);
  box-shadow:0 10px 20px rgba(0,0,0,.18);
  pointer-events:none;
}

/* ‚úÖ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞—Ä—É—Å–µ–ª–µ–π –≤–Ω—É—Ç—Ä–∏ "–ß–∞—Å—Ç–æ –±–µ—Ä—É—Ç –≤–º–µ—Å—Ç–µ" */
.combo-groups{display:flex;flex-direction:column;gap:10px;}
.combo-subtitle{
  font-weight:900;
  padding:6px 2px 0;
  opacity:.95;
  color:#fff;
  display:flex;
  align-items:center;
  gap:8px;
}
.combo-subtitle small{
  font-weight:800;
  opacity:.8;
}

/* cart */
.cart{
  background:rgba(255,255,255,.94);
  color:#1d1d1d;
  margin:12px;padding:16px;border-radius:24px;border:1px solid rgba(255,255,255,.22);
  box-shadow: 0 12px 26px rgba(0,0,0,.18);
}
textarea.input{height:90px;}
.order-btn{
  width:100%;
  padding:18px;
  margin-top:14px;
  border-radius:24px;
  cursor:pointer;
  color:#8B0E13;
  font-size:17px;
  font-weight:900;
  border:1px solid rgba(255,255,255,.65);
  background:#ffffff;
  box-shadow: 0 14px 26px rgba(0,0,0,.22);
  position:relative;
  z-index:2;
  scroll-margin-bottom: calc(var(--sticky-h) + 24px);
}
#cartBox{
  scroll-margin-bottom: calc(var(--sticky-h) + 24px);
  padding-bottom: calc(16px + var(--sticky-h));
}

/* popup */
.popup{position:fixed;inset:0;background:rgba(0,0,0,.4);display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:.3s;}
.popup.show{opacity:1;pointer-events:auto;}
.popup-box{
  background:white;padding:26px;border-radius:24px;text-align:center;font-weight:800;border:1px solid rgba(255,255,255,.22);
  box-shadow: 0 14px 26px rgba(0,0,0,.22);
  color:#1d1d1d;
}

/* image modal */
.img-modal{
  position:fixed; inset:0;
  background:rgba(0,0,0,.62);
  display:flex; align-items:center; justify-content:center;
  opacity:0; pointer-events:none;
  transition:.18s;
  z-index:2000;
  padding:18px;
}
.img-modal.show{opacity:1;pointer-events:auto;}
.img-modal-box{
  width:min(520px, 100%);
  border-radius:22px;
  overflow:hidden;
  background:#fff;
  border:1px solid rgba(255,255,255,.22);
  box-shadow:0 18px 44px rgba(0,0,0,.28);
}
.img-modal-top{
  display:flex; align-items:center; justify-content:space-between;
  gap:10px;
  padding:12px 12px;
  background:rgba(0,0,0,.04);
}
.img-modal-title{font-weight:900;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}
.img-modal-close{
  width:38px;height:38px;border:none;border-radius:14px;background:transparent;cursor:pointer;
  font-size:22px;line-height:1;color:#666;
}
.img-modal-img{width:100%;max-height:70vh;object-fit:contain;background:#fff;display:block;}

/* sticky */
.sticky-checkout{
  position:fixed;left:0;right:0;bottom:0;
  padding:10px 12px;
  background:rgba(139,14,19,.86);
  backdrop-filter: blur(10px);
  z-index:999;
  border-top:1px solid rgba(255,255,255,.14);
  height: var(--sticky-h);
  display:flex;
  align-items:center;
}
.sticky-inner{
  max-width:520px;margin:0 auto;border-radius:18px;padding:10px 12px;
  background:rgba(255,255,255,.94);
  border:1px solid rgba(255,255,255,.22);
  box-shadow: 0 14px 26px rgba(0,0,0,.22);
  display:flex;align-items:center;justify-content:space-between;gap:12px;
  width:100%;
  color:#1d1d1d;
}
.sticky-sum{font-weight:900;line-height:1.1;}
.sticky-sum small{display:block;font-weight:800;opacity:.75;margin-top:2px;}
.sticky-btn{
  padding:12px 14px;border-radius:16px;border:1px solid rgba(255,255,255,.65);
  background:#ffffff;color:#8B0E13;font-weight:900;cursor:pointer;
  box-shadow: 0 14px 26px rgba(0,0,0,.22);
}

/* menu sheet */
.menu-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.38);opacity:0;pointer-events:none;transition:.18s;z-index:1000;}
.menu-backdrop.show{opacity:1;pointer-events:auto;}
.menu-sheet{
  position:fixed;left:0; right:0;bottom:-100%;
  background:rgba(255,255,255,.94);
  color:#1d1d1d;
  border-top-left-radius:22px;border-top-right-radius:22px;border:1px solid rgba(255,255,255,.22);
  box-shadow:0 18px 40px rgba(0,0,0,.22);
  transition:.22s;z-index:1010;padding:10px 12px 14px;
  max-height: 86vh;overflow:auto;-webkit-overflow-scrolling:touch;
}
.menu-sheet.show{bottom:0;}
.menu-handle{width:44px;height:5px;border-radius:999px;background:rgba(0,0,0,.18);margin:6px auto 10px;}
.menu-head{display:flex;align-items:center;justify-content:space-between;padding:2px 4px 10px;}
.menu-head b{font-size:16px;}
.menu-close{width:38px;height:38px;border:none;border-radius:12px;background:transparent;cursor:pointer;font-size:22px;line-height:1;color:#777;}
.menu-list{display:flex;flex-direction:column;gap:8px;}
.menu-item{
  display:flex;align-items:center;justify-content:space-between;gap:10px;
  padding:12px 12px;border-radius:16px;border:1px solid rgba(0,0,0,.08);
  background:rgba(0,0,0,.03);
  cursor:pointer;text-decoration:none;color:#1d1d1d;
}
.menu-left{display:flex;align-items:center;gap:10px;min-width:0;}
.menu-ic{width:30px;height:30px;border-radius:12px;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.06);flex:0 0 auto;}
.menu-txt{display:flex;flex-direction:column;min-width:0;}
.menu-name{font-weight:900;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.menu-sub{font-size:12px;opacity:.75;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px;}
.menu-right{opacity:.65;font-weight:900;}

/* about text blocks */
.about-desc{
  margin-top:10px;
  padding:12px;
  border-radius:14px;
  border:1px solid rgba(0,0,0,.08);
  background:#fff;
  color:#1d1d1d;
  line-height:1.28;
  font-weight:800;
}
.about-desc b{font-weight:900;}
.about-desc .muted{opacity:.85;font-weight:800;}
.about-desc .line{margin-top:8px;}

/* search (–∑–∞–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) */
.search-title{display:none;width:100%;padding:10px 14px 0;font-weight:900;color:#fff;}
.search-title.show{display:block;}
.search-wrap{display:none;position:relative;padding:10px 12px 6px;gap:10px;align-items:center;}
.search-wrap.show{display:flex;}
.search-wrap .input{width:100%;margin:0;}
.search-clear{
  position:absolute;right:20px;top:50%;transform:translateY(-50%);
  width:32px;height:32px;border-radius:12px;
  display:flex;align-items:center;justify-content:center;
  background:rgba(0,0,0,.06);
  border:1px solid rgba(0,0,0,.08);
  cursor:pointer;color:#333;font-weight:900;
}

/* online block */
.online-box{
  display:none;
  margin:10px auto 0;
  width:85%;
  border:1px solid rgba(0,0,0,.08);
  border-radius:18px;
  background:rgba(0,0,0,.03);
  padding:12px;
}
.online-row{display:flex;justify-content:space-between;gap:10px;align-items:center;margin-top:8px;}
.online-label{font-weight:900;}
.online-val{font-weight:900;color:#8B0E13;word-break:break-word;}

/* ‚úÖ CLICK QR block (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ CLICK) */
.click-box{
  display:none;
  margin:10px auto 0;
  width:85%;
  border:1px solid rgba(0,0,0,.08);
  border-radius:18px;
  background:rgba(0,0,0,.03);
  padding:12px;
}
.click-title{font-weight:900;margin-bottom:8px;}
.click-qr{
  width:100%;
  border-radius:18px;
  overflow:hidden;
  border:1px solid rgba(0,0,0,.08);
  background:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
}
.click-qr img{
  width:100%;
  max-width:360px;
  height:auto;
  display:block;
}

/* ‚úÖ Splash (–ø–æ–∫–∞–∑—ã–≤–∞–µ–º 5 —Å–µ–∫—É–Ω–¥, –º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å) */
.splash{
  position:fixed; inset:0;
  background:rgba(0,0,0,.62);
  display:flex; align-items:center; justify-content:center;
  opacity:0; pointer-events:none;
  transition:.18s;
  z-index:3000;
  padding:18px;
}
.splash.show{opacity:1;pointer-events:auto;}
.splash-box{
  width:min(520px, 100%);
  border-radius:22px;
  overflow:hidden;
  background:rgba(255,255,255,.96);
  border:1px solid rgba(255,255,255,.22);
  box-shadow:0 18px 44px rgba(0,0,0,.28);
  color:#1d1d1d;
  position:relative;
}
.splash-close{
  position:absolute; right:10px; top:10px;
  width:38px;height:38px;border:none;border-radius:14px;background:rgba(0,0,0,.04);
  cursor:pointer;font-size:22px;line-height:1;color:#666;
}
.splash-body{padding:14px 14px 16px;}
.splash-img{
  width:100%;
  height:auto;
  display:block;
  border-radius:18px;
  border:1px solid rgba(0,0,0,.08);
  background:#fff;
}
.splash-text{
  margin-top:12px;
  font-weight:900;
  line-height:1.25;
  text-align:center;
  color:#1d1d1d;
}
.splash-text small{
  display:block;
  margin-top:8px;
  font-weight:800;
  opacity:.85;
}

/* ‚úÖ –ì–ê–õ–ï–†–ï–Ø */
.gallery-box{
  display:none;
  padding:6px 4px 10px;
}
.gallery-inner{
  border:1px solid rgba(0,0,0,.08);
  border-radius:16px;
  overflow:hidden;
  background:rgba(0,0,0,.03);
  padding:12px;
}
.gallery-grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:10px;
}
.gallery-tile{
  border-radius:16px;
  overflow:hidden;
  border:1px solid rgba(0,0,0,.08);
  background:#fff;
  box-shadow:0 12px 24px rgba(0,0,0,.10);
  cursor:pointer;
}
.gallery-tile img{
  width:100%;
  height:110px;
  object-fit:cover;
  display:block;
}
.gallery-cap{
  padding:8px 10px;
  font-weight:900;
  font-size:12px;
  color:#1d1d1d;
  opacity:.92;
}

/* ‚úÖ –û–¢–ó–´–í–´ –í–ù–£–¢–†–ò */
.reviews-box{
  display:none;
  padding:6px 4px 10px;
}
.reviews-inner{
  border:1px solid rgba(0,0,0,.08);
  border-radius:16px;
  overflow:hidden;
  background:rgba(0,0,0,.03);
  padding:12px;
}
.rating-row{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  margin-bottom:10px;
}
.rating-avg{
  font-weight:900;
  color:#1d1d1d;
}
.rating-pill{
  padding:6px 10px;border-radius:999px;
  background:#fff;
  border:1px solid rgba(0,0,0,.08);
  font-weight:900;
  color:#8B0E13;
}
.rev-list{display:flex;flex-direction:column;gap:10px;}
.rev-card{
  background:#fff;
  border:1px solid rgba(0,0,0,.08);
  border-radius:14px;
  padding:10px 12px;
}
.rev-top{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:6px;}
.rev-name{font-weight:900;}
.rev-stars{font-weight:900;color:#8B0E13;}
.rev-text{font-weight:800;opacity:.92;line-height:1.25;}
.rev-date{font-weight:800;opacity:.65;font-size:12px;margin-top:6px;}

/* ‚úÖ VIP: –ü–æ–∑–≤–∞—Ç—å –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–∞ */
.vip-box{
  display:none;
  padding:6px 4px 10px;
}
.vip-inner{
  border:1px solid rgba(0,0,0,.08);
  border-radius:16px;
  overflow:hidden;
  background:rgba(0,0,0,.03);
  padding:12px;
}
.toggle-row{
  display:flex;align-items:center;justify-content:space-between;gap:12px;
  padding:10px 10px;border-radius:14px;background:#fff;border:1px solid rgba(0,0,0,.08);
}
.toggle-left{display:flex;flex-direction:column;gap:2px;}
.toggle-left b{font-weight:900;color:#1d1d1d;}
.toggle-left small{font-weight:800;opacity:.7;color:#1d1d1d;}
.switch{
  width:52px;height:30px;border-radius:999px;background:rgba(0,0,0,.12);
  position:relative;cursor:pointer;border:1px solid rgba(0,0,0,.08);
}
.switch::after{
  content:'';
  position:absolute;top:3px;left:3px;
  width:24px;height:24px;border-radius:50%;
  background:#fff;box-shadow:0 10px 18px rgba(0,0,0,.18);
  transition:.18s;
}
.switch.on{background:rgba(139,14,19,.35);}
.switch.on::after{left:25px;}
.vip-actions{margin-top:10px;display:flex;flex-direction:column;gap:8px;}
.vip-actions .btn{min-width:auto;width:100%;}
.vip-input{
  width:100%;
  margin:8px 0 0;
  padding:12px 14px;
  border-radius:16px;
  border:1px solid rgba(0,0,0,.08);
  background:#fff;
  font-weight:900;
  outline:none;
}

@media (max-width:420px){
  .brand-title{font-size:28px;}
  .brand-title2{font-size:13px;}
  .brand-wrap{transform: translateX(10px);}
  .header{padding:14px 10px 24px;}
  .input{width:92%;}
  .products{gap:14px;}
  .online-box{width:92%;}
  .click-box{width:92%;}
}
@media (max-width:360px){
  .header img{width:76px;height:76px;left:10px;}
  .brand-title{font-size:26px;}
  .brand-title2{font-size:12px;letter-spacing:1.3px;}
  .brand-phone a{font-size:13px;}
  .btn{min-width:108px;padding:12px 16px;}
  .cat-btn{min-width:126px;padding:12px 16px;font-size:13px;}
  .langs .btn{min-width:86px;padding:10px 10px;font-size:13px;}
  .payments .btn{min-width:78px;padding:9px 9px;font-size:12.5px;}
  .welcome{font-size:12px;padding:6px 9px;}
  .gallery-grid{grid-template-columns:1fr;}
  .gallery-tile img{height:140px;}
}
</style>
</head>

<body>

<!-- ‚úÖ Splash overlay (–∫–∞—Ä—Ç–∏–Ω–∫—É –∑–∞–≥—Ä—É–∑–∏—à—å —Å–∞–º) -->
<!-- –ò–º—è —Ñ–∞–π–ª–∞: images/splash_kebab.jpg (JPG) -->
<div class="splash" id="splash" onclick="closeSplash(event)">
  <div class="splash-box" onclick="event.stopPropagation()">
    <button class="splash-close" onclick="closeSplash(event)">√ó</button>
    <div class="splash-body">
      <img class="splash-img" id="splashImg" src="images/splash_kebab.jpg" alt="Splash" onerror="this.onerror=null;this.style.display='none';">
      <div class="splash-text">
        Haqiqiy turkcha kebab ‚Äî birinchi luqmadan zabt etadigan ta‚Äôm!
        <small>Ger√ßek T√ºrk kebabƒ± ‚Äî ilk lokmadan b√ºy√ºleyen lezzet!</small>
      </div>
    </div>
  </div>
</div>

<div class="header">
  <img src="images/logo.png" onerror="this.src='logo.png'" alt="ARBA logo">

  <div class="brand-wrap">
    <div class="brand-title">ARBA</div>
    <div class="brand-title2">ISTANBUL RESTAURANT</div>

    <!-- ‚úÖ –ê–≤—Ç–æ-–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ –∏–º–µ–Ω–∏ -->
    <div class="welcome" id="welcomeLine" style="display:none;"></div>

    <div class="brand-phone">
      <a href="tel:+998662334499" onclick="callPhone(event)">+998 66 233 44 99</a>
      <a href="tel:+998935336067" onclick="callPhone2(event)">+998 93 533 60 67</a>
    </div>
  </div>

  <div class="header-actions">
    <div class="act-btn" onclick="openTopMenu()" title="–ú–µ–Ω—é">
      <div class="burger"><span></span><span></span><span></span></div>
    </div>
    <div class="act-btn" onclick="openRoute()" title="–ú–∞—Ä—à—Ä—É—Ç">
      <span class="act-ico">üìç</span>
    </div>
    <div class="act-btn" onclick="toggleSearch()" title="–ü–æ–∏—Å–∫">
      <span class="act-ico">üîç</span>
    </div>
  </div>
</div>

<div class="page">

<!-- top menu -->
<div class="menu-backdrop" id="menuBackdrop" onclick="closeTopMenu()"></div>
<div class="menu-sheet" id="menuSheet">
  <div class="menu-handle"></div>
  <div class="menu-head">
    <b id="menuTitle">–ú–µ–Ω—é</b>
    <button class="menu-close" onclick="closeTopMenu()">√ó</button>
  </div>

  <div class="menu-list">

    <!-- ‚úÖ VIP: –ü–æ–∑–≤–∞—Ç—å –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–∞ -->
    <div class="menu-item" onclick="toggleVip()" role="button">
      <div class="menu-left">
        <div class="menu-ic">üõé</div>
        <div class="menu-txt">
          <div class="menu-name" id="mVipTitle">–ü–æ–∑–≤–∞—Ç—å –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–∞</div>
          <div class="menu-sub" id="mVipSub">–ï—Å–ª–∏ –≤—ã –≤ –∑–∞–ª–µ ‚Äî –æ—Ç–ø—Ä–∞–≤–∏–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É</div>
        </div>
      </div>
      <div class="menu-right">‚Ä∫</div>
    </div>

    <div class="vip-box" id="vipWrap">
      <div class="vip-inner">
        <div class="toggle-row" onclick="toggleInHall()">
          <div class="toggle-left">
            <b id="vipToggleTitle">–Ø –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ</b>
            <small id="vipToggleSub">–í–∫–ª—é—á–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∑–≤–∞—Ç—å –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–∞</small>
          </div>
          <div class="switch" id="vipSwitch" aria-label="toggle"></div>
        </div>

        <input class="vip-input" id="vipTable" placeholder="–°—Ç–æ–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä: 5)">

        <div class="vip-actions">
          <button class="btn" style="min-width:auto;" onclick="callWaiter(event)" id="vipCallBtn">üõé –ü–æ–∑–≤–∞—Ç—å –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–∞</button>
          <button class="btn" style="min-width:auto; background:rgba(0,0,0,.06); color:#1d1d1d; border:1px solid rgba(0,0,0,.08);" onclick="toggleVip(event)" id="vipCloseBtn">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
        <div style="margin-top:8px;font-size:12px;opacity:.72;font-weight:800;" id="vipHint">
          –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —É–π–¥—ë—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É. –ú–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –æ—Ñ–æ—Ä–º–ª—è—Ç—å –∑–∞–∫–∞–∑.
        </div>
      </div>
    </div>

    <!-- ‚úÖ –ì–ê–õ–ï–†–ï–Ø —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞ -->
    <div class="menu-item" onclick="toggleGallery()" role="button">
      <div class="menu-left">
        <div class="menu-ic">üñº</div>
        <div class="menu-txt">
          <div class="menu-name" id="mGalleryTitle">–ì–∞–ª–µ—Ä–µ—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞</div>
          <div class="menu-sub" id="mGallerySub">–ò–Ω—Ç–µ—Ä—å–µ—Ä ‚Ä¢ –ü–µ—á—å ‚Ä¢ –ì—Ä–∏–ª—å ‚Ä¢ –ö–æ–º–∞–Ω–¥–∞</div>
        </div>
      </div>
      <div class="menu-right">‚Ä∫</div>
    </div>

    <!-- ‚úÖ –§–∞–π–ª—ã –≥–∞–ª–µ—Ä–µ–∏ (JPG) -->
    <!-- images/gallery_interior.jpg -->
    <!-- images/gallery_oven.jpg -->
    <!-- images/gallery_grill.jpg -->
    <!-- images/gallery_team.jpg -->
    <div class="gallery-box" id="galleryWrap">
      <div class="gallery-inner">
        <div class="gallery-grid" id="galleryGrid"></div>
      </div>
    </div>

    <!-- ‚úÖ –û—Ç–∑—ã–≤—ã –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <div class="menu-item" onclick="toggleReviews()" role="button">
      <div class="menu-left">
        <div class="menu-ic">‚≠ê</div>
        <div class="menu-txt">
          <div class="menu-name" id="mReviewsTitle">–û—Ç–∑—ã–≤—ã</div>
          <div class="menu-sub" id="mReviewsSub">–†–µ–π—Ç–∏–Ω–≥ –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ç–∑—ã–≤—ã</div>
        </div>
      </div>
      <div class="menu-right">‚Ä∫</div>
    </div>

    <div class="reviews-box" id="reviewsWrap">
      <div class="reviews-inner">
        <div class="rating-row">
          <div class="rating-avg" id="ratingAvgTxt">–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥</div>
          <div class="rating-pill" id="ratingPill">4.8 ‚òÖ</div>
        </div>

        <div class="rev-list" id="reviewsList"></div>

        <div style="height:10px;"></div>
        <button class="btn" style="width:100%; min-width:auto;" onclick="openYandexReviews(event)" id="reviewsYandexBtn">
          ‚≠ê –û—Ç–∫—Ä—ã—Ç—å –≤ –Ø–Ω–¥–µ–∫—Å–µ
        </button>
      </div>
    </div>

    <!-- ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û: –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ (–Ø–Ω–¥–µ–∫—Å) -->
    <div class="menu-item" onclick="openYandexReviews(event)" role="button">
      <div class="menu-left">
        <div class="menu-ic">‚úçÔ∏è</div>
        <div class="menu-txt">
          <div class="menu-name" id="mReviewTitle">–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</div>
          <div class="menu-sub" id="mReviewSub">–Ø–Ω–¥–µ–∫—Å –æ—Ç–∑—ã–≤—ã / —Ä–µ–π—Ç–∏–Ω–≥</div>
        </div>
      </div>
      <div class="menu-right">‚Ä∫</div>
    </div>

    <div class="menu-item" onclick="toggleLegal()" role="button">
      <div class="menu-left">
        <div class="menu-ic">üè¢</div>
        <div class="menu-txt">
          <div class="menu-name" id="mLegalTitle">–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–º –ª–∏—Ü–∞–º</div>
          <div class="menu-sub" id="mLegalSub">–ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –¥–æ–≥–æ–≤–æ—Ä–æ–≤ / —Å—á–µ—Ç–æ–≤</div>
        </div>
      </div>
      <div class="menu-right">‚Ä∫</div>
    </div>

    <div id="legalWrap" style="display:none; padding:6px 4px 10px;">
      <div style="border:1px solid rgba(0,0,0,.08); border-radius:16px; overflow:hidden; background:rgba(0,0,0,.03); padding:12px;">
        <div style="font-weight:900; margin-bottom:8px;" id="mLegalMail">‚úâÔ∏è –ü–æ—á—Ç–∞</div>
        <a href="mailto:arba.restaurant@gmail.com"
           onclick="openMail(event)"
           style="text-decoration:none; font-weight:900; color:#8B0E13; word-break:break-all;"
           id="mLegalMailAddr">arba.restaurant@gmail.com</a>

        <div style="height:12px;"></div>

        <div style="font-weight:900; margin-bottom:6px;" id="mLegalPhone">üìû –¢–µ–ª–µ—Ñ–æ–Ω</div>
        <a href="tel:+998662334499" onclick="callPhone(event)" style="text-decoration:none; font-weight:900; color:#8B0E13;" id="mLegalPhoneNum">
          +998 66 233 44 99
        </a>

        <div style="height:12px;"></div>

        <button class="btn" style="width:100%; min-width:auto;" onclick="openManagerChat(event)" id="mLegalChatBtn">
          üí¨ –ß–∞—Ç —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
        </button>
      </div>
    </div>

    <a class="menu-item" href="tel:+998662334499" onclick="closeTopMenu()">
      <div class="menu-left">
        <div class="menu-ic">üìû</div>
        <div class="menu-txt">
          <div class="menu-name" id="mCallTitle">–ü–æ–∑–≤–æ–Ω–∏—Ç—å</div>
          <div class="menu-sub" id="mCallSub">+998 66 233 44 99</div>
        </div>
      </div>
      <div class="menu-right">‚Ä∫</div>
    </a>

    <a class="menu-item" href="#" onclick="openInstagram(event)">
      <div class="menu-left">
        <div class="menu-ic" aria-hidden="true">
          <svg width="18" height="18" viewBox="0 0 24 24" style="display:block;">
            <path fill="currentColor" d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm10 2H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm-5 4.3A5.7 5.7 0 1 1 6.3 14 5.7 5.7 0 0 1 12 8.3zm0 2A3.7 3.7 0 1 0 15.7 14 3.7 3.7 0 0 0 12 10.3zM18 6.7a1 1 0 1 1-1 1 1 1 0 0 1 1-1z"/>
          </svg>
        </div>
        <div class="menu-txt">
          <div class="menu-name" id="mInstaTitle">@arba_istanbul_restaurant01</div>
          <div class="menu-sub" id="mInstaSub">–û—Ç–∫—Ä—ã—Ç—å Instagram</div>
        </div>
      </div>
      <div class="menu-right">‚Ä∫</div>
    </a>

    <!-- ‚úÖ –ü–ï–†–ï–ú–ï–©–ï–ù–û: –û –Ω–∞—Å ‚Äî —Ç–µ–ø–µ—Ä—å –ø–æ–¥ Instagram -->
    <div class="menu-item" onclick="toggleAbout()" role="button">
      <div class="menu-left">
        <div class="menu-ic">‚ÑπÔ∏è</div>
        <div class="menu-txt">
          <div class="menu-name" id="mAboutTitle">–û –Ω–∞—Å</div>
          <div class="menu-sub" id="mAboutSub">–ê–¥—Ä–µ—Å, —Ç–µ–ª–µ—Ñ–æ–Ω—ã, –≥—Ä–∞—Ñ–∏–∫</div>
        </div>
      </div>
      <div class="menu-right">‚Ä∫</div>
    </div>

    <div id="aboutWrap" style="display:none; padding:6px 4px 10px;">
      <div style="border:1px solid rgba(0,0,0,.08); border-radius:16px; overflow:hidden; background:rgba(0,0,0,.03); padding:12px;">
        <div style="font-weight:900; margin-bottom:6px;" id="aboutAddrLabel">üìç –ê–¥—Ä–µ—Å</div>
        <div style="font-weight:900; color:#1d1d1d; opacity:.92; line-height:1.25;" id="aboutAddrText">
          –°–∞–º–∞—Ä–∫–∞–Ω–¥, —É–ª. –ú–∞—Ö–º—É–¥–∞ –ö–∞—à–≥–∞—Ä–∏, 92
        </div>

        <div style="height:10px;"></div>

        <button class="btn" style="width:100%; min-width:auto;" type="button" onclick="openRouteFromAbout(event)" id="aboutRouteBtn">
          üìç –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç
        </button>

        <div style="height:12px;"></div>

        <div style="font-weight:900; margin-bottom:6px;" id="aboutPhoneLabel">üìû –¢–µ–ª–µ—Ñ–æ–Ω</div>
        <div style="display:flex; flex-direction:column; gap:6px;">
          <a href="tel:+998662334499" onclick="callPhone(event)" style="text-decoration:none; font-weight:900; color:#8B0E13;">
            +998 66 233 44 99
          </a>
          <a href="tel:+998935336067" onclick="callPhone2(event)" style="text-decoration:none; font-weight:900; color:#8B0E13;">
            +998 93 533 60 67
          </a>
        </div>

        <div style="height:12px;"></div>

        <div style="font-weight:900; margin-bottom:6px;" id="aboutHoursLabel">üïí –ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã</div>
        <div style="font-weight:900; color:#1d1d1d; opacity:.92;" id="aboutHoursText">11:00‚Äì23:00</div>

        <!-- ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û: –¢–µ–∫—Å—Ç "–û –Ω–∞—Å" (–ø–æ —è–∑—ã–∫–∞–º) -->
        <div class="about-desc" id="aboutDescText"></div>
      </div>
    </div>

  </div>
</div>

<!-- search (–∑–∞–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
<div class="search-title" id="searchTitle">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞</div>
<div class="search-wrap" id="searchWrap">
  <input id="searchInput" class="input" placeholder="–ü–æ–∏—Å–∫..." oninput="searchProducts()" onkeydown="onSearchKey(event)">
  <div class="search-clear" onclick="clearSearch()" title="–û—á–∏—Å—Ç–∏—Ç—å">‚úñ</div>
</div>

<!-- ‚úÖ —è–∑—ã–∫–∏ –≤ 1 —Ä—è–¥ + —Ñ–ª–∞–≥–∏ -->
<div class="langs">
  <button class="btn" id="langRU" onclick="setLang('ru',this)"><span class="lang-flag">üá∑üá∫</span>RU</button>
  <button class="btn" id="langUZ" onclick="setLang('uz',this)"><span class="lang-flag">üá∫üáø</span>UZ</button>
  <button class="btn" id="langEN" onclick="setLang('en',this)"><span class="lang-flag">üá¨üáß</span>EN</button>
  <button class="btn" id="langTR" onclick="setLang('tr',this)"><span class="lang-flag">üáπüá∑</span>TR</button>
</div>

<!-- ‚úÖ –ù–æ–≤–∏–Ω–∫–∏ —É–¥–∞–ª–µ–Ω—ã -->
<div class="popular-wrap" id="popularWrap">
  <div class="popular-title" id="popularTitle">üî• –ü–æ–ø—É–ª—è—Ä–Ω–æ–µ</div>
  <div class="popular-row" id="popularRow"></div>
</div>

<div class="popular-wrap" id="giftWrap">
  <div class="popular-title" id="giftTitle">‚≠ê –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º</div>
  <div class="mini-row" id="giftRow"></div>
</div>

<!-- ‚úÖ –ß–∞—Å—Ç–æ –±–µ—Ä—É—Ç –≤–º–µ—Å—Ç–µ (–Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞—Ä—É—Å–µ–ª–µ–π) -->
<div class="popular-wrap" id="comboWrap" style="display:none;">
  <div class="popular-title" id="comboTitle">üß† –ß–∞—Å—Ç–æ –±–µ—Ä—É—Ç –≤–º–µ—Å—Ç–µ</div>
  <div class="combo-groups" id="comboGroups"></div>
</div>

<div class="types">
  <button class="btn" id="btnDelivery" onclick="setType('delivery',this)"></button>
  <button class="btn" id="btnPickup" onclick="setType('pickup',this)"></button>
</div>

<input id="address" class="input">
<input id="phone" class="input">

<div class="categories" id="cats"></div>
<div class="products" id="products"></div>

<div class="cart" id="cartBox">
  <b id="cartTitle"></b>: <span id="total">0</span> <span id="sumWord">—Å—É–º</span>
  <div style="margin-top:10px; font-weight:900;">
    <span id="totalLabel">–ò—Ç–æ–≥–æ</span>: <span id="grandTotal">0</span> <span id="sumWord2">—Å—É–º</span>
  </div>

  <textarea id="comment" class="input"></textarea>

  <!-- ‚úÖ –æ–ø–ª–∞—Ç—ã –≤ 1 —Ä—è–¥, —É–∂–µ -->
  <div class="payments">
    <button class="btn active" id="payCash" onclick="setPayment('cash')"></button>
    <button class="btn" id="payClick" onclick="setPayment('click')"></button>
    <button class="btn" id="payOnline" onclick="setPayment('online')">üí≥ –û–Ω–ª–∞–π–Ω</button>
  </div>

  <!-- ‚úÖ CLICK QR (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ CLICK) -->
  <div class="click-box" id="clickBox">
    <div class="click-title" id="clickTitle">CLICK QR</div>
    <div class="click-qr">
      <img id="clickQrImg" src="images/qr_click.jpg" alt="CLICK QR" onerror="this.onerror=null;this.src='images/logo.png'">
    </div>
    <div style="margin-top:8px; font-size:12px; opacity:.75;" id="clickHint">
      –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ CLICK, –∑–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ ¬´–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑¬ª.
    </div>
  </div>

  <div class="online-box" id="onlineBox">
    <div class="online-label" id="recipLabel">–ü–æ–ª—É—á–∞—Ç–µ–ª—å</div>
    <div class="online-row">
      <div class="online-val" id="recipVal">Tahirov Daler</div>
      <button class="btn copy-btn" type="button" onclick="copyText('Tahirov Daler')" id="copyRecip">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
    </div>

    <div class="online-label" style="margin-top:10px;" id="cardLabel">–ö–∞—Ä—Ç–∞</div>
    <div class="online-row">
      <div class="online-val" id="cardVal">9860 1001 2635 9502</div>
      <button class="btn copy-btn" type="button" onclick="copyText('9860100126359502')" id="copyCard">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
    </div>

    <div style="margin-top:8px; font-size:12px; opacity:.75;" id="onlineHint">
      –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –Ω–∞–∂–º–∏—Ç–µ ¬´–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑¬ª –∏ –Ω–∞–ø–∏—à–∏—Ç–µ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ‚Äú–û–ø–ª–∞—Ç–∏–ª(–∞)‚Äù.
    </div>
  </div>

  <button class="order-btn" id="orderBtn" onclick="sendOrder()"></button>
  <div style="height: 12px;"></div>
</div>

<div class="popup" id="popup"><div class="popup-box" id="popupText">‚úÖ –ó–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç!</div></div>

<div class="img-modal" id="imgModal" onclick="closeImgModal(event)">
  <div class="img-modal-box" onclick="event.stopPropagation()">
    <div class="img-modal-top">
      <div class="img-modal-title" id="imgModalTitle">–§–æ—Ç–æ</div>
      <button class="img-modal-close" onclick="closeImgModal(event)">√ó</button>
    </div>
    <img class="img-modal-img" id="imgModalImg" src="" alt="">
  </div>
</div>

<div class="sticky-checkout" id="stickyBar">
  <div class="sticky-inner">
    <div class="sticky-sum">
      <span id="stickyTotal">0</span> <small id="sumCurrency">—Å—É–º</small>
    </div>
    <button class="sticky-btn" onclick="openCart()" id="stickyCartBtn">–ö–æ—Ä–∑–∏–Ω–∞</button>
  </div>
</div>

</div><!-- /page -->

<script>
Telegram.WebApp.ready();
try{ Telegram.WebApp.expand(); Telegram.WebApp.disableVerticalSwipes?.(); }catch(_){}

function setVH(){ document.documentElement.style.setProperty('--vh', (window.innerHeight*0.01)+'px'); }
setVH();
window.addEventListener('resize', setVH, {passive:true});
window.addEventListener('orientationchange', ()=>setTimeout(setVH, 250), {passive:true});

function syncStickyHeight(){
  const el = document.getElementById('stickyBar');
  if(!el) return;
  const h = Math.ceil(el.getBoundingClientRect().height || 86);
  document.documentElement.style.setProperty('--sticky-h', h + 'px');
}
window.addEventListener('resize', ()=>setTimeout(syncStickyHeight, 50), {passive:true});
window.addEventListener('orientationchange', ()=>setTimeout(syncStickyHeight, 250), {passive:true});

/* ‚úÖ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è (–≤ —à–∞–ø–∫–µ) */
const MAP_URL = "https://yandex.uz/maps/org/60749009354/?filter=alternate_vertical%3ARequestWindow&ll=66.947552%2C39.651712&mode=search&sctx=ZAAAAAgBEAAaKAoSCfBrJAnCu1BAEdOHLqhv00NAEhIJDJQUWABTpj8ReqcC7nn%2BlD8iBgABAgMEBSgKOABA3lBIAWIkc25pcHBldF9leHBfbmFtZT1mdWxsb2JqZWN0cy8xLng6cmVmYiNzbmlwcGV0X2V4cF9uYW1lPXRvcG9iamVjdHMvMS54OnJlZmIec25pcHBldF9leHBfbmFtZT1nb29kcy8xLng6cmVmYidzbmlwcGV0X2V4cF9uYW1lPWdvb2RzX3JlZ2lzdGVyLzEueDpyZWZiC2ZyZXNobmVzcz0wYhdzb3VyY2U9YnVzaW5lc3M6ZXhwX3JlZmIVc291cmNlPXByaWNlczpleHBfcmVmagJ1ep0BzczMPaABAKgBAL0BByYCjMIBBsqjsafiAYICGEFyYmEgaXN0YW5idWwgcmVzdGF1cmFudIoCAJICBTExNTA4mgIMZGVza3RvcC1tYXBz&sll=66.950198%2C39.651845&sspn=0.043602%2C0.020502&text=Arba%20istanbul%20restaurant&z=14";

/* ‚úÖ —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ—Ç–∑—ã–≤—ã (–Ø–Ω–¥–µ–∫—Å) */
const YANDEX_REVIEWS_URL = "https://yandex.uz/maps/org/60749009354/?filter=alternate_vertical%3ARequestWindow&ll=66.947552%2C39.651712&mode=search&sctx=ZAAAAAgBEAAaKAoSCfBrJAnCu1BAEdOHLqhv00NAEhIJDJQUWABTpj8ReqcC7nn%2BlD8iBgABAgMEBSgKOABA3lBIAWIkc25pcHBldF9leHBfbmFtZT1mdWxsb2JqZWN0cy8xLng6cmVmYiNzbmlwcGV0X2V4cF9uYW1lPXRvcG9iamVjdHMvMS54OnJlZmIec25pcHBldF9leHBfbmFtZT1nb29kcy8xLng6cmVmYidzbmlwcGV0X2V4cF9uYW1lPWdvb2RzX3JlZ2lzdGVyLzEueDpyZWZiC2ZyZXNobmVzcz0wYhdzb3VyY2U9YnVzaW5lc3M6ZXhwX3JlZmIVc291cmNlPXByaWNlczpleHBfcmVmagJ1ep0BzczMPaABAKgBAL0BByYCjMIBBsqjsafiAYICGEFyYmEgaXN0YW5idWwgcmVzdGF1cmFudIoCAJICBTExNTA4mgIMZGVza3RvcC1tYXBz&sll=66.950198%2C39.651845&sspn=0.043602%2C0.020502&text=Arba%20istanbul%20restaurant&z=14";

const INSTA_URL = "https://www.instagram.com/arba_istanbul_restaurant01/";
const ADMIN_ID = 6013591658;

/* ‚úÖ –¥–æ—Å—Ç–∞–≤–∫–∞ –ù–ï –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ */
const DELIVERY_FEE = 0;

/* ‚úÖ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ QR –¥–ª—è CLICK (–∑–∞–≥—Ä—É–∑–∏ –≤ images/) */
const CLICK_QR_IMG = "images/qr_click.jpg"; // <-- JPG —Ñ–∞–π–ª

/* ‚úÖ Splash image (–∑–∞–≥—Ä—É–∑–∏ JPG –≤ images/) */
const SPLASH_IMG = "images/splash_kebab.jpg"; // <-- JPG —Ñ–∞–π–ª

/* ‚úÖ Gallery images (–∑–∞–≥—Ä—É–∑–∏ JPG –≤ images/) */
const GALLERY = [
  {id:'interior', img:'images/gallery_interior.jpg', t:{ru:'–ò–Ω—Ç–µ—Ä—å–µ—Ä', uz:'Interyer', en:'Interior', tr:'ƒ∞√ß mekan'}},
  {id:'oven',     img:'images/gallery_oven.jpg',     t:{ru:'–ü–µ—á—å',     uz:'Pech',     en:'Oven',     tr:'Fƒ±rƒ±n'}},
  {id:'grill',    img:'images/gallery_grill.jpg',    t:{ru:'–ì—Ä–∏–ª—å',    uz:'Gril',     en:'Grill',    tr:'Izgara'}},
  {id:'team',     img:'images/gallery_team.jpg',     t:{ru:'–ö–æ–º–∞–Ω–¥–∞',  uz:'Jamoa',    en:'Team',     tr:'Ekip'}}
];

/* ‚úÖ Reviews inside app (–º–æ–∂–µ—à—å –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ/–∑–∞–≥—Ä—É–∑–∫—É —Å —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ–∑–∂–µ) */
const REVIEWS = [
  {name:'Aziza', stars:5, text:{ru:'–û—á–µ–Ω—å –≤–∫—É—Å–Ω—ã–π –∫–µ–±–∞–± –∏ –±—ã—Å—Ç—Ä—ã–π —Å–µ—Ä–≤–∏—Å!', uz:'Kebab juda mazali, xizmat tez!', en:'Delicious kebab and fast service!', tr:'Kebap √ßok lezzetli, servis hƒ±zlƒ±!'}, date:'2026-01-28'},
  {name:'Rustam', stars:5, text:{ru:'–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞ —Å—É–ø–µ—Ä, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–µ—Ä–Ω–µ–º—Å—è.', uz:'Muhit zo‚Äòr, albatta qaytamiz.', en:'Great atmosphere, we will come back.', tr:'Atmosfer harika, tekrar geleceƒüiz.'}, date:'2026-01-16'},
  {name:'Malika', stars:4, text:{ru:'–ü–∏–¥–µ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å, –ø–æ—Ä—Ü–∏–∏ —Ö–æ—Ä–æ—à–∏–µ.', uz:'Pide yoqdi, porsiya yaxshi.', en:'Loved the pide, good portions.', tr:'Pide √ßok iyi, porsiyonlar g√ºzel.'}, date:'2025-12-30'}
];
const AVG_RATING = 4.8;

/* phones */
const PHONE1_DISPLAY = "+998 66 233 44 99";
const PHONE1_TEL = "tel:+998662334499";
const PHONE2_DISPLAY = "+998 93 533 60 67";
const PHONE2_TEL = "tel:+998935336067";

/* ABOUT content */
const ABOUT_ADDR = {
  ru:"–°–∞–º–∞—Ä–∫–∞–Ω–¥, —É–ª. –ú–∞—Ö–º—É–¥–∞ –ö–∞—à–≥–∞—Ä–∏, 92",
  uz:"Samarqand, Mahmud Qashg‚Äòari ko‚Äòchasi, 92",
  en:"Samarkand, Mahmud Kashgari str., 92",
  tr:"Semerkant, Mahmud Ka≈ügari Cd., 92"
};
const ABOUT_HOURS = "11:00‚Äì23:00";

/* ‚úÖ –¢–µ–∫—Å—Ç –¥–ª—è "–û –Ω–∞—Å" –ø–æ —è–∑—ã–∫–∞–º */
const ABOUT_DESC = {
  ru:`ARBA Istanbul Restaurant ‚Äî —ç—Ç–æ —É—é—Ç–Ω—ã–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω —Ç—É—Ä–µ—Ü–∫–æ–π –∫—É—Ö–Ω–∏ –≤ —Å–∞–º–æ–º —Å–µ—Ä–¥—Ü–µ –°–∞–º–∞—Ä–∫–∞–Ω–¥–∞.<br>
–ú—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –Ω–∞—Å—Ç–æ—è—â–∏–µ —Ç—É—Ä–µ—Ü–∫–∏–µ –±–ª—é–¥–∞, –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–æ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–º —Ä–µ—Ü–µ–ø—Ç–∞–º —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–≤–µ–∂–∏—Ö –∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤.<br><br>
–í –Ω–∞—à–µ–º –º–µ–Ω—é ‚Äî —Å–æ—á–Ω—ã–µ –∫–µ–±–∞–±—ã, –∞—Ä–æ–º–∞—Ç–Ω—ã–µ –ø–∏–¥–µ, –≥—Ä–∏–ª—å, —Å—Ç–µ–π–∫–∏, —Å—É–ø—ã –∏ —Ö–æ–ª–æ–¥–Ω—ã–µ –∑–∞–∫—É—Å–∫–∏.<br>
–ú—ã —Å–æ–∑–¥–∞—ë–º –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –≥–æ—Å—Ç–µ–ø—Ä–∏–∏–º—Å—Ç–≤–∞ –∏ —É—é—Ç–∞, —á—Ç–æ–±—ã –∫–∞–∂–¥—ã–π –≥–æ—Å—Ç—å –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª –≤–∫—É—Å –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –°—Ç–∞–º–±—É–ª–∞.<br><br>
<b>üìç –ê–¥—Ä–µ—Å:</b> –°–∞–º–∞—Ä–∫–∞–Ω–¥, —É–ª. –ú–∞—Ö–º—É–¥–∞ –ö–∞—à–≥–∞—Ä–∏, 92<br>
<b>üìû –¢–µ–ª–µ—Ñ–æ–Ω:</b> +998 66 233 44 99<br>
<b>üìû –¢–µ–ª–µ—Ñ–æ–Ω:</b> +998 93 533 60 67<br>
<b>üïí –ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã:</b> 11:00 ‚Äì 23:00`,
  uz:`ARBA Istanbul Restaurant ‚Äî Samarqand markazida joylashgan shinam turk oshxonasi restorani.<br>
Biz an‚Äôanaviy retseptlar asosida tayyorlangan haqiqiy turk taomlarini taklif qilamiz.<br><br>
Menyuda shirali kebablar, mazali pide, gril, steyk, sho‚Äòrvalar va sovuq gazaklar mavjud.<br>
Har bir mehmon o‚Äòzini Istanbul muhitida his qilishi uchun iliq va mehmondo‚Äòst muhit yaratamiz.<br><br>
<b>üìç Manzil:</b> Samarqand, Mahmud Qoshg‚Äòari ko‚Äòchasi, 92<br>
<b>üìû Telefon:</b> +998 66 233 44 99<br>
<b>üìû Telefon:</b> +998 93 533 60 67<br>
<b>üïí Ish vaqti:</b> 11:00 ‚Äì 23:00`,
  en:`ARBA Istanbul Restaurant is a cozy Turkish cuisine restaurant located in the heart of Samarkand.<br>
We serve authentic Turkish dishes prepared according to traditional recipes using fresh and high-quality ingredients.<br><br>
Our menu includes juicy kebabs, delicious pide, grill dishes, steaks, soups, and cold appetizers.<br>
We create a warm and welcoming atmosphere so every guest can experience the true taste of Istanbul.<br><br>
<b>üìç Address:</b> 92 Mahmud Kashgari Street, Samarkand<br>
<b>üìû Phone:</b> +998 66 233 44 99<br>
<b>üìû Phone:</b> +998 93 533 60 67<br>
<b>üïí Working hours:</b> 11:00 ‚Äì 23:00`,
  tr:`ARBA Istanbul Restaurant, Semerkant‚Äôƒ±n merkezinde bulunan sƒ±cak ve samimi bir T√ºrk mutfaƒüƒ± restoranƒ±dƒ±r.<br>
Geleneksel tariflere g√∂re hazƒ±rlanmƒ±≈ü, taze ve kaliteli malzemelerle yapƒ±lan ger√ßek T√ºrk yemekleri sunuyoruz.<br><br>
Men√ºm√ºzde sulu kebaplar, lezzetli pideler, ƒ±zgara √ße≈üitleri, steakler, √ßorbalar ve soƒüuk mezeler bulunmaktadƒ±r.<br>
Her misafirimizin ƒ∞stanbul‚Äôun ger√ßek lezzetini hissetmesi i√ßin sƒ±cak ve misafirperver bir ortam sunuyoruz.<br><br>
<b>üìç Adres:</b> Semerkant, Mahmud Ka≈ügari Caddesi 92<br>
<b>üìû Telefon:</b> +998 66 233 44 99<br>
<b>üìû Telefon:</b> +998 93 533 60 67<br>
<b>üïí √áalƒ±≈üma saatleri:</b> 11:00 ‚Äì 23:00`
};

/* Telegram user */
const tgUser = Telegram.WebApp.initDataUnsafe?.user || {};
const tg_username = tgUser.username || "";
const tg_first_name = tgUser.first_name || "";
const tg_id = tgUser.id || "";

/* splash */
let splashTimer = null;
function showSplash(){
  try{ splashImg.src = SPLASH_IMG; }catch(_){}
  const el = document.getElementById('splash');
  if(!el) return;
  el.classList.add('show');
  clearTimeout(splashTimer);
  splashTimer = setTimeout(()=>{ hideSplash(); }, 5000);
}
function hideSplash(){
  const el = document.getElementById('splash');
  if(!el) return;
  el.classList.remove('show');
  clearTimeout(splashTimer);
  splashTimer = null;
}
function closeSplash(e){
  try{ e.preventDefault(); e.stopPropagation(); }catch(_){}
  hideSplash();
}

/* copy helper */
function copyText(t){
  const text = String(t || "");
  if(!text) return;
  try{
    if(navigator.clipboard && navigator.clipboard.writeText){
      navigator.clipboard.writeText(text);
    }else{
      const ta = document.createElement('textarea');
      ta.value = text;
      ta.style.position='fixed'; ta.style.left='-9999px';
      document.body.appendChild(ta);
      ta.select(); document.execCommand('copy');
      document.body.removeChild(ta);
    }
    Telegram.WebApp.HapticFeedback?.notificationOccurred?.('success');
  }catch(_){}
}

/* UI translations */
const UI = {
  ru:{
    menu:'–ú–µ–Ω—é',
    aboutTitle:'–û –Ω–∞—Å',
    aboutSub:'–ê–¥—Ä–µ—Å, —Ç–µ–ª–µ—Ñ–æ–Ω—ã, –≥—Ä–∞—Ñ–∏–∫',
    aboutAddr:'üìç –ê–¥—Ä–µ—Å',
    aboutRoute:'üìç –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç',
    aboutPhone:'üìû –¢–µ–ª–µ—Ñ–æ–Ω',
    aboutHours:'üïí –ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã',

    vipTitle:'–ü–æ–∑–≤–∞—Ç—å –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–∞',
    vipSub:'–ï—Å–ª–∏ –≤—ã –≤ –∑–∞–ª–µ ‚Äî –æ—Ç–ø—Ä–∞–≤–∏–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É',
    vipToggleTitle:'–Ø –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ',
    vipToggleSub:'–í–∫–ª—é—á–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∑–≤–∞—Ç—å –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–∞',
    vipCall:'üõé –ü–æ–∑–≤–∞—Ç—å –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–∞',
    vipClose:'–ó–∞–∫—Ä—ã—Ç—å',
    vipHint:'–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —É–π–¥—ë—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É. –ú–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –æ—Ñ–æ—Ä–º–ª—è—Ç—å –∑–∞–∫–∞–∑.',
    vipTablePh:'–°—Ç–æ–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä: 5)',

    galleryTitle:'–ì–∞–ª–µ—Ä–µ—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞',
    gallerySub:'–ò–Ω—Ç–µ—Ä—å–µ—Ä ‚Ä¢ –ü–µ—á—å ‚Ä¢ –ì—Ä–∏–ª—å ‚Ä¢ –ö–æ–º–∞–Ω–¥–∞',

    reviewsTitle:'–û—Ç–∑—ã–≤—ã',
    reviewsSub:'–†–µ–π—Ç–∏–Ω–≥ –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ç–∑—ã–≤—ã',
    reviewsOpenY:'‚≠ê –û—Ç–∫—Ä—ã—Ç—å –≤ –Ø–Ω–¥–µ–∫—Å–µ',
    ratingAvg:'–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥',

    reviewTitle:'–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤',
    reviewSub:'–Ø–Ω–¥–µ–∫—Å –æ—Ç–∑—ã–≤—ã / —Ä–µ–π—Ç–∏–Ω–≥',
    legalTitle:'–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–º –ª–∏—Ü–∞–º',
    legalSub:'–ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –¥–æ–≥–æ–≤–æ—Ä–æ–≤ / —Å—á–µ—Ç–æ–≤',
    legalMail:'‚úâÔ∏è –ü–æ—á—Ç–∞',
    legalPhone:'üìû –¢–µ–ª–µ—Ñ–æ–Ω',
    legalChat:'üí¨ –ß–∞—Ç —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º',
    callTitle:'–ü–æ–∑–≤–æ–Ω–∏—Ç—å',
    instaSub:'–û—Ç–∫—Ä—ã—Ç—å Instagram',
    searchResults:'–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞',
    popular:'üî• –ü–æ–ø—É–ª—è—Ä–Ω–æ–µ',
    gift:'‚≠ê –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º',
    combo:'üß† –ß–∞—Å—Ç–æ –±–µ—Ä—É—Ç –≤–º–µ—Å—Ç–µ',
    comboDrink:'–ù–∞–ø–∏—Ç–∫–∏ –∫ –±–ª—é–¥–∞–º',
    comboSide:'–ö –±–ª—é–¥—É –¥–æ–±–∞–≤—å—Ç–µ',
    comboMore:'–ï—â—ë —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º',
    delivery:'üöö –î–æ—Å—Ç–∞–≤–∫–∞',
    pickup:'üèÉ –°–∞–º–æ–≤—ã–≤–æ–∑',
    address:'üìç –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏',
    phone:'üìû –¢–µ–ª–µ—Ñ–æ–Ω',
    cart:'üõí –ö–æ—Ä–∑–∏–Ω–∞',
    total:'–ò—Ç–æ–≥–æ',
    order:'–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑',
    comment:'‚úçÔ∏è –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É',
    cash:'üíµ –ù–∞–ª–∏—á–Ω—ã–µ',
    click:'üí≥ CLICK',
    online:'üí≥ –û–Ω–ª–∞–π–Ω',
    sum:'—Å—É–º',
    recip:'–ü–æ–ª—É—á–∞—Ç–µ–ª—å',
    card:'–ö–∞—Ä—Ç–∞',
    copy:'–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å',
    onlineHint:'–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –Ω–∞–∂–º–∏—Ç–µ ¬´–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑¬ª –∏ –Ω–∞–ø–∏—à–∏—Ç–µ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ‚Äú–û–ø–ª–∞—Ç–∏–ª(–∞)‚Äù.',
    empty:'–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞—è',
    clickTitle:'CLICK QR',
    clickHint:'–û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ CLICK, –∑–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ ¬´–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑¬ª.',
    welcome:'üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å'
  },
  uz:{
    menu:'Menyu',
    aboutTitle:'Biz haqimizda',
    aboutSub:'Manzil, telefonlar, ish vaqti',
    aboutAddr:'üìç Manzil',
    aboutRoute:"üìç Yo‚Äòl ko‚Äòrsatish",
    aboutPhone:'üìû Telefon',
    aboutHours:'üïí Ish vaqti',

    vipTitle:'Ofitsiantni chaqirish',
    vipSub:'Agar zalda bo‚Äòlsangiz ‚Äî admindan xabar',
    vipToggleTitle:'Men restorandaman',
    vipToggleSub:'Yoqing ‚Äî ofitsiantni chaqirasiz',
    vipCall:'üõé Ofitsiantni chaqirish',
    vipClose:'Yopish',
    vipHint:'Xabar administratorga yuboriladi. Buyurtmani davom ettirishingiz mumkin.',
    vipTablePh:'Stol (masalan: 5)',

    galleryTitle:'Restoran galereyasi',
    gallerySub:'Interyer ‚Ä¢ Pech ‚Ä¢ Gril ‚Ä¢ Jamoa',

    reviewsTitle:'Fikrlar',
    reviewsSub:'Reyting va so‚Äònggi fikrlar',
    reviewsOpenY:'‚≠ê Yandexda ochish',
    ratingAvg:'O‚Äòrtacha reyting',

    reviewTitle:'Fikr qoldirish',
    reviewSub:'Yandex fikrlar / reyting',
    legalTitle:'Yuridik shaxslar',
    legalSub:"Shartnoma / hisob uchun kontaktlar",
    legalMail:'‚úâÔ∏è Pochta',
    legalPhone:'üìû Telefon',
    legalChat:'üí¨ Menejer bilan chat',
    callTitle:"Qo'ng'iroq qilish",
    instaSub:"Instagramni ochish",
    searchResults:'Qidiruv natijalari',
    popular:'üî• Ommabop',
    gift:'‚≠ê Tavsiya',
    combo:'üß† Ko‚Äòp olinadi',
    comboDrink:'Ichimliklar',
    comboSide:'Qo‚Äòshib oling',
    comboMore:'Yana tavsiya',
    delivery:'üöö Yetkazish',
    pickup:'üèÉ Olib ketish',
    address:'üìç Manzil',
    phone:'üìû Telefon',
    cart:'üõí Savat',
    total:'Jami',
    order:'Buyurtma berish',
    comment:'‚úçÔ∏è Izoh',
    cash:'üíµ Naqd',
    click:'üí≥ CLICK',
    online:'üí≥ Onlayn',
    sum:"so‚Äòm",
    recip:'Qabul qiluvchi',
    card:'Karta',
    copy:'Nusxa',
    onlineHint:'To‚Äòlovdan so‚Äòng ‚ÄúBuyurtma berish‚Äùni bosing va izohga ‚ÄúTo‚Äòladim‚Äù deb yozing.',
    empty:"Savat bo‚Äòsh",
    clickTitle:'CLICK QR',
    clickHint:"CLICK ilovasida QR ni skaner qiling, so‚Äòng ‚ÄúBuyurtma berish‚Äùni bosing.",
    welcome:'üëã Xush kelibsiz'
  },
  en:{
    menu:'Menu',
    aboutTitle:'About us',
    aboutSub:'Address, phones, hours',
    aboutAddr:'üìç Address',
    aboutRoute:'üìç Get directions',
    aboutPhone:'üìû Phone',
    aboutHours:'üïí Working hours',

    vipTitle:'Call a waiter',
    vipSub:'If you are in the hall ‚Äî we notify admin',
    vipToggleTitle:'I am in the restaurant',
    vipToggleSub:'Enable to call a waiter',
    vipCall:'üõé Call a waiter',
    vipClose:'Close',
    vipHint:'Notification will be sent to the admin. You can continue ordering.',
    vipTablePh:'Table (e.g. 5)',

    galleryTitle:'Restaurant gallery',
    gallerySub:'Interior ‚Ä¢ Oven ‚Ä¢ Grill ‚Ä¢ Team',

    reviewsTitle:'Reviews',
    reviewsSub:'Rating and latest reviews',
    reviewsOpenY:'‚≠ê Open in Yandex',
    ratingAvg:'Average rating',

    reviewTitle:'Leave a review',
    reviewSub:'Yandex reviews / rating',
    legalTitle:'For legal entities',
    legalSub:'Contacts for contracts / invoices',
    legalMail:'‚úâÔ∏è Email',
    legalPhone:'üìû Phone',
    legalChat:'üí¨ Chat with manager',
    callTitle:'Call',
    instaSub:'Open Instagram',
    searchResults:'Search results',
    popular:'üî• Popular',
    gift:'‚≠ê Recommended',
    combo:'üß† Often bought together',
    comboDrink:'Drinks for dishes',
    comboSide:'Add to your dish',
    comboMore:'More recommendations',
    delivery:'üöö Delivery',
    pickup:'üèÉ Pickup',
    address:'üìç Address',
    phone:'üìû Phone',
    cart:'üõí Cart',
    total:'Total',
    order:'Place order',
    comment:'‚úçÔ∏è Comment',
    cash:'üíµ Cash',
    click:'üí≥ CLICK',
    online:'üí≥ Online',
    sum:'sum',
    recip:'Recipient',
    card:'Card',
    copy:'Copy',
    onlineHint:'After payment press ‚ÄúPlace order‚Äù and write ‚ÄúPaid‚Äù in comment.',
    empty:'Cart is empty',
    clickTitle:'CLICK QR',
    clickHint:'Scan the QR in CLICK app, then press ‚ÄúPlace order‚Äù.',
    welcome:'üëã Welcome'
  },
  tr:{
    menu:'Men√º',
    aboutTitle:'Hakkƒ±mƒ±zda',
    aboutSub:'Adres, telefonlar, saatler',
    aboutAddr:'üìç Adres',
    aboutRoute:'üìç Yol tarifi',
    aboutPhone:'üìû Telefon',
    aboutHours:'üïí √áalƒ±≈üma saatleri',

    vipTitle:'Garson √ßaƒüƒ±r',
    vipSub:'Salondaysanƒ±z ‚Äî y√∂neticiye bildirelim',
    vipToggleTitle:'Restorandayƒ±m',
    vipToggleSub:'A√ßƒ±n ‚Äî garson √ßaƒüƒ±rƒ±n',
    vipCall:'üõé Garson √ßaƒüƒ±r',
    vipClose:'Kapat',
    vipHint:'Bildirim y√∂neticiye gider. Sipari≈üi s√ºrd√ºrebilirsiniz.',
    vipTablePh:'Masa (√∂rn: 5)',

    galleryTitle:'Restoran galerisi',
    gallerySub:'ƒ∞√ß mekan ‚Ä¢ Fƒ±rƒ±n ‚Ä¢ Izgara ‚Ä¢ Ekip',

    reviewsTitle:'Yorumlar',
    reviewsSub:'Puan ve son yorumlar',
    reviewsOpenY:'‚≠ê Yandex‚Äôte a√ß',
    ratingAvg:'Ortalama puan',

    reviewTitle:'Yorum bƒ±rak',
    reviewSub:'Yandex yorumlar / puan',
    legalTitle:'T√ºzel ki≈üiler i√ßin',
    legalSub:'S√∂zle≈üme / fatura ileti≈üim',
    legalMail:'‚úâÔ∏è E-posta',
    legalPhone:'üìû Telefon',
    legalChat:'üí¨ Y√∂neticiyle sohbet',
    callTitle:'Ara',
    instaSub:"Instagram‚Äôƒ± a√ß",
    searchResults:'Arama sonu√ßlarƒ±',
    popular:'üî• Pop√ºler',
    gift:'‚≠ê √ñnerilen',
    combo:'üß† Sƒ±k birlikte alƒ±nƒ±r',
    comboDrink:'ƒ∞√ßecek √∂nerileri',
    comboSide:'Yanƒ±na ekleyin',
    comboMore:'Diƒüer √∂neriler',
    delivery:'üöö Teslimat',
    pickup:'üèÉ Gel-al',
    address:'üìç Adres',
    phone:'üìû Telefon',
    cart:'üõí Sepet',
    total:'Toplam',
    order:'Sipari≈ü ver',
    comment:'‚úçÔ∏è Not',
    cash:'üíµ Nakit',
    click:'üí≥ CLICK',
    online:'üí≥ Online',
    sum:'sum',
    recip:'Alƒ±cƒ±',
    card:'Kart',
    copy:'Kopyala',
    onlineHint:'√ñdemeden sonra ‚ÄúSipari≈ü ver‚Äùe basƒ±n ve nota ‚Äú√ñdedim‚Äù yazƒ±n.',
    empty:'Sepet bo≈ü',
    clickTitle:'CLICK QR',
    clickHint:"CLICK uygulamasƒ±nda QR‚Äôƒ± okutun, sonra ‚ÄúSipari≈ü ver‚Äùe basƒ±n.",
    welcome:'üëã Ho≈ü geldiniz'
  }
};

let lang='uz', category='salads', type='pickup', payment='cash', cart={};

/* ‚úÖ –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–û: –í–°–ï –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –≤—Å–µ –±–ª—é–¥–∞ */
const MENU = {
  salads:[
    {id:'salad_baklajon_yogurt', p:39000, img:'images/salad_baklajon_yogurt.jpg', n:{ru:'–ë–∞–∫–ª–∞–∂–∞–Ω —Å –π–æ–≥—É—Ä—Ç–æ–º', uz:'Baqlajon yogurt bilan', en:'Eggplant with yogurt', tr:'Yoƒüurtlu patlƒ±can'}},
    {id:'salad_crispy_eggplant', p:71500, img:'images/salad_crispy_eggplant.jpg', n:{ru:'–°–∞–ª–∞—Ç –∏–∑ —Ö—Ä—É—Å—Ç—è—â–∏—Ö –±–∞–∫–ª–∞–∂–∞–Ω', uz:'Qarsildoq baqlajon salati', en:'Crispy eggplant salad', tr:'√áƒ±tƒ±r patlƒ±can salatasƒ±'}},
    {id:'salad_greek', p:41600, img:'images/salad_greek.jpg', n:{ru:'–ì—Ä–µ—á–µ—Å–∫–∏–π', uz:'Gretsiya', en:'Greek', tr:'Yunan salatasƒ±'}},
    {id:'salad_haydari', p:26000, img:'images/salad_haydari.jpg', n:{ru:'–•–∞–π–¥–∞—Ä–∏', uz:'Haydari', en:'Haydari', tr:'Haydari'}},
    {id:'salad_coban', p:39000, img:'images/salad_coban.jpg', n:{ru:'–ß–æ–±–∞–Ω', uz:"Cho'bon", en:'Shepherd salad', tr:'√áoban salata'}},
    {id:'salad_ezme', p:39000, img:'images/salad_ezme.jpg', n:{ru:'–≠–∑–º–µ', uz:'Ezme', en:'Ezme', tr:'Ezme'}},
    {id:'salad_vinegret', p:39000, img:'images/salad_vinegret.jpg', n:{ru:'–í–∏–Ω–µ–≥—Ä–µ—Ç', uz:'Vinegret', en:'Vinaigrette', tr:'Vinegret'}}
  ],
  soups:[
    {id:'soup_ezogelin', p:38900, img:'images/soup_ezogelin.jpg', n:{ru:'–≠–∑–æ–≥–µ–ª–∏–Ω', uz:'Ezogelin', en:'Ezogelin soup', tr:'Ezogelin √ßorbasƒ±'}},
    {id:'soup_lentil_cream', p:38900, img:'images/soup_lentil_cream.jpg', n:{ru:'–ß–µ—á–µ–≤–∏—á–Ω—ã–π –∫—Ä–µ–º —Å—É–ø', uz:"Krem yasmiq sho'rva", en:'Lentil cream soup', tr:'Mercimek krem √ßorbasƒ±'}}
  ],
  hot:[
    {id:'hot_beydi_tandir', p:98800, img:'images/hot_beydi_tandir.jpg', n:{ru:'–ë–µ–π–¥–∏ —Ç–∞–Ω–¥—ã—Ä —Å —Å–æ—É—Å–æ–º', uz:"Beydi tandir sous bilan", en:'Beydi tandir with sauce', tr:'Soslu Beyti tandƒ±r'}},
    {id:'hot_dana_bonfile', p:162500, img:'images/hot_dana_bonfile.jpg', n:{ru:'–î–∞–Ω–∞ –ë–æ–Ω—Ñ–∏–ª–µ', uz:'Dana bonfile', en:'Beef bonfile', tr:'Dana bonfile'}},
    {id:'hot_iskender_kebab', p:116900, img:'images/hot_iskender_kebab.jpg', n:{ru:'–ò—Å–∫–∞–Ω–¥–∞—Ä –∫–µ–±–∞–±', uz:'Iskandar kebab', en:'Iskender kebab', tr:'ƒ∞skender kebap'}},
    {id:'hot_sac_tava', p:109200, img:'images/hot_sac_tava.jpg', n:{ru:'–°–∞—á —Ç–∞–≤–∞', uz:"Sac tava", en:'Sa√ß tava', tr:'Sa√ß tava'}}
  ],
  pide:[
    {id:'pide_lahmacun', p:40800, img:'images/pide_lahmacun.jpg', n:{ru:'–õ–∞—Ö–º–∞–¥–∂—É–Ω', uz:'Lahmajoun', en:'Lahmacun', tr:'Lahmacun'}},
    {id:'pide_mix', p:102700, img:'images/pide_mix.jpg', n:{ru:'–ú–∏–∫—Å –ü–∏–¥–µ', uz:'Miks pide', en:'Mix pide', tr:'Karƒ±≈üƒ±k pide'}},
    {id:'pide_meat', p:91000, img:'images/pide_meat.jpg', n:{ru:'–ú—è—Å–Ω–æ–µ –ü–∏–¥–µ', uz:"Go'shtli pide", en:'Meat pide', tr:'Kƒ±ymalƒ± pide'}},
    {id:'pide_meat_cheese', p:102700, img:'images/pide_meat_cheese.jpg', n:{ru:'–ú—è—Å–Ω–æ–µ –ü–∏–¥–µ —Å —Å—ã—Ä–æ–º', uz:"Go'shtli pishloqli pide", en:'Meat pide with cheese', tr:'Peynirli kƒ±ymalƒ± pide'}},
    {id:'pide_sausage_cheese', p:96200, img:'images/pide_sausage_cheese.jpg', n:{ru:'–ü–∏–¥–µ –∫–æ–ª–±–∞—Å–Ω—ã–π —Å —Å—ã—Ä–æ–º', uz:"Kolbasali pishloqli pide", en:'Sausage pide with cheese', tr:'Sucuklu peynirli pide'}},
    {id:'pide_cheese', p:78000, img:'images/pide_cheese.jpg', n:{ru:'–ü–∏–¥–µ —Å —Å—ã—Ä–æ–º', uz:"Pishloqli pide", en:'Cheese pide', tr:'Peynirli pide'}},
    {id:'pide_yumurtali', p:83200, img:'images/pide_yumurtali.jpg', n:{ru:'–Æ–º—É—Ä—Ç–∞–ª–∏ –ü–∏–¥–µ', uz:"Tuxumli pide", en:'Egg pide', tr:'Yumurtalƒ± pide'}},
    {id:'pide_minced', p:85800, img:'images/pide_minced.jpg', n:{ru:'–ü–∏–¥–µ —Å —Ñ–∞—Ä—à–µ–º', uz:"Qiyma pide", en:'Minced meat pide', tr:'Kƒ±ymalƒ± pide'}}
  ],
  steak:[
    {id:'steak_kasharli_kufte', p:94900, img:'images/steak_kasharli_kufte.jpg', n:{ru:'–ö–∞—à–∞—Ä–ª–∏ –∫—é—Ñ—Ç–µ', uz:"Kasharli ko'fte", en:'Kasharli k√∂fte', tr:'Ka≈üarlƒ± k√∂fte'}},
    {id:'steak_turkish_cutlet', p:91000, img:'images/steak_turkish_cutlet.jpg', n:{ru:'–ö–æ—Ç–ª–µ—Ç–∫–∞ –ø–æ-–¢—É—Ä–µ—Ü–∫–∏', uz:"Turkcha kotlet", en:'Turkish cutlet', tr:'T√ºrk usul√º k√∂fte'}},
    {id:'steak_pirzola_lamb', p:149500, img:'images/steak_pirzola_lamb.jpg', n:{ru:'–ü–∏—Ä–∑–æ–ª–∞ –±–∞—Ä–∞–Ω–∏–Ω–∞', uz:"Qo'y pirzola", en:'Lamb pirzola', tr:'Kuzu pirzola'}},
    {id:'steak_pirzola_chicken', p:84500, img:'images/steak_pirzola_chicken.jpg', n:{ru:'–ü–∏—Ä–∑–æ–ª–∞ –∫—É—Ä–∏–Ω–∞—è', uz:"Tovuq pirzola", en:'Chicken pirzola', tr:'Tavuk pirzola'}}
  ],
  grill:[
    {id:'grill_adana_kebab', p:96200, img:'images/grill_adana_kebab.jpg', n:{ru:'–ê–¥–∞–Ω–∞ –∫–µ–±–∞–±', uz:'Adana kebab', en:'Adana kebab', tr:'Adana kebap'}},
    {id:'grill_chicken_wings', p:81900, img:'images/grill_chicken_wings.jpg', n:{ru:'–ö—É—Ä–∏–Ω—ã–µ –∫—Ä—ã–ª—ã—à–∫–∏', uz:"Tovuq qanotlari", en:'Chicken wings', tr:'Tavuk kanat'}},
    {id:'grill_chicken_shashlik', p:78000, img:'images/grill_chicken_shashlik.jpg', n:{ru:'–®–∞—à–ª—ã–∫ –∫—É—Ä–∏–Ω—ã–π', uz:"Tovuq shashlik", en:'Chicken shashlik', tr:'Tavuk ≈üi≈ü'}},
    {id:'grill_urfa_kebab', p:91000, img:'images/grill_urfa_kebab.jpg', n:{ru:'–£—Ä—Ñ–∞ –∫–µ–±–∞–±', uz:'Urfa kebab', en:'Urfa kebab', tr:'Urfa kebap'}}
  ],
  pasta:[
    {id:'pasta_spaghetti_beef', p:91000, img:'images/pasta_spaghetti_beef.jpg', n:{ru:'–°–ø–∞–≥–µ—Ç—Ç–∏ —Å –≥–æ–≤—è–¥–∏–Ω–æ–π', uz:"Mol go'shtli spagetti", en:'Spaghetti with beef', tr:'Dana etli spagetti'}}
  ],
  cold_drinks:[
    {id:'drink_bliss_juice', p:24700, img:'images/drink_bliss_juice.jpg', n:{ru:'–°–æ–∫ Bliss –≤ –∞—Å—Å-—Ç–µ', uz:'Bliss sharbat assorti', en:'Bliss juice (assorted)', tr:'Bliss meyve suyu (√ße≈üit)'}},
    {id:'drink_chortoq_05', p:19500, img:'images/drink_chortoq_05.jpg', n:{ru:'Chortoq 0.5l', uz:'Chortoq 0.5l', en:'Chortoq 0.5l', tr:'Chortoq 0.5l'}},
    {id:'drink_chortoq_075', p:23400, img:'images/drink_chortoq_075.jpg', n:{ru:'Chortoq 0.75l', uz:'Chortoq 0.75l', en:'Chortoq 0.75l', tr:'Chortoq 0.75l'}},
    {id:'drink_chortoq_033', p:15600, img:'images/drink_chortoq_033.jpg', n:{ru:'Chortoq 330l', uz:'Chortoq 330l', en:'Chortoq 330l', tr:'Chortoq 330l'}},
    {id:'drink_cola_033', p:12900, img:'images/drink_cola_033.jpg', n:{ru:'Coca Cola 330l', uz:'Coca Cola 330l', en:'Coca Cola 330l', tr:'Coca Cola 330l'}},
    {id:'drink_fanta_05', p:15600, img:'images/drink_fanta_05.jpg', n:{ru:'Fanta 0.5l', uz:'Fanta 0.5l', en:'Fanta 0.5l', tr:'Fanta 0.5l'}},
    {id:'drink_cola_05', p:15600, img:'images/drink_cola_05.jpg', n:{ru:'Coca Cola 0.5l', uz:'Coca Cola 0.5l', en:'Coca Cola 0.5l', tr:'Coca Cola 0.5l'}},
    {id:'drink_fanta_1', p:19500, img:'images/drink_fanta_1.jpg', n:{ru:'Fanta 1l', uz:'Fanta 1l', en:'Fanta 1l', tr:'Fanta 1l'}},
    {id:'drink_cola_1', p:19500, img:'images/drink_cola_1.jpg', n:{ru:'Coca Cola 1l', uz:'Coca Cola 1l', en:'Coca Cola 1l', tr:'Coca Cola 1l'}},
    {id:'drink_fanta_15', p:23400, img:'images/drink_fanta_15.jpg', n:{ru:'Fanta 1.5l', uz:'Fanta 1.5l', en:'Fanta 1.5l', tr:'Fanta 1.5l'}},
    {id:'drink_cola_15', p:23400, img:'images/drink_cola_15.jpg', n:{ru:'Coca Cola 1.5l', uz:'Coca Cola 1.5l', en:'Coca Cola 1.5l', tr:'Coca Cola 1.5l'}},
    {id:'drink_ayran_05', p:26000, img:'images/drink_ayran_05.jpg', n:{ru:'–ê–π—Ä–∞–Ω 0.5l', uz:'Ayran 0.5l', en:'Ayran 0.5l', tr:'Ayran 0.5l'}},
    {id:'drink_ayran_1', p:51900, img:'images/drink_ayran_1.jpg', n:{ru:'–ê–π—Ä–∞–Ω 1l', uz:'Ayran 1l', en:'Ayran 1l', tr:'Ayran 1l'}},
    {id:'drink_water_05', p:6500, img:'images/drink_water_05.jpg', n:{ru:'–í–æ–¥–∞ 0.5l', uz:'Suv 0.5l', en:'Water 0.5l', tr:'Su 0.5l'}},
    {id:'drink_water_spark_1', p:12900, img:'images/drink_water_spark_1.jpg', n:{ru:'–í–æ–¥–∞ –≥–∞–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è 1l', uz:'Gazli suv 1l', en:'Sparkling water 1l', tr:'Maden suyu 1l'}},
    {id:'drink_water_still_1', p:12900, img:'images/drink_water_still_1.jpg', n:{ru:'–í–æ–¥–∞ –Ω–µ –≥–∞–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è 1l', uz:"Gazsiz suv 1l", en:'Still water 1l', tr:'Durgun su 1l'}},
    {id:'drink_water_still_15', p:16900, img:'images/drink_water_still_15.jpg', n:{ru:'–í–æ–¥–∞ –Ω–µ –≥–∞–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è 1.5l', uz:"Gazsiz suv 1.5l", en:'Still water 1.5l', tr:'Durgun su 1.5l'}}
  ]
};

const CATS = {
  ru:{salads:'ü•ó –°–∞–ª–∞—Ç—ã', soups:'üç≤ –ü–µ—Ä–≤—ã–µ –±–ª—é–¥–∞', hot:'üçΩÔ∏è –ì–æ—Ä—è—á–∏–µ –±–ª—é–¥–∞', pide:'ü•ô –ü–∏–¥–µ', steak:'ü•© –°—Ç–µ–π–∫', grill:'üî• –®–∞—à–ª—ã–∫ & –ì—Ä–∏–ª—å', pasta:'üçù –ü–∞—Å—Ç–∞', cold_drinks:'ü•§ –•–æ–ª–æ–¥–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏'},
  uz:{salads:'ü•ó Salatlar', soups:"üç≤ Birinchi taomlar", hot:"üçΩÔ∏è Issiq taomlar", pide:'ü•ô Pide', steak:'ü•© Steyk', grill:'üî• Shashlik & Gril', pasta:'üçù Pasta', cold_drinks:'ü•§ Sovuq ichimliklar'},
  en:{salads:'ü•ó Salads', soups:'üç≤ Soups', hot:'üçΩÔ∏è Hot meals', pide:'ü•ô Pide', steak:'ü•© Steak', grill:'üî• Grill', pasta:'üçù Pasta', cold_drinks:'ü•§ Cold drinks'},
  tr:{salads:'ü•ó Salatalar', soups:'üç≤ √áorbalar', hot:'üçΩÔ∏è Sƒ±cak yemekler', pide:'ü•ô Pide', steak:'ü•© Steak', grill:'üî• Izgara', pasta:'üçù Makarna', cold_drinks:'ü•§ Soƒüuk i√ßecekler'}
};

/* carousels */
const POPULAR = ['hot_iskender_kebab','grill_adana_kebab','pide_lahmacun'];
const GIFT_ITEMS = ['hot_dana_bonfile','steak_pirzola_lamb','pide_mix'];

/* index */
const ITEM_INDEX = {};
for (const c in MENU){ MENU[c].forEach(it => ITEM_INDEX[it.id]=it); }

/* ‚úÖ –∫–∞—Ä—Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ */
const ITEM_CAT = {};
for (const c in MENU){ MENU[c].forEach(it => ITEM_CAT[it.id]=c); }

/* helpers */
function escapeHtml(s){return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));}
function nameOf(id){const it = ITEM_INDEX[id]; return (it && it.n && (it.n[lang] || it.n.ru)) ? (it.n[lang] || it.n.ru) : id;}
function formatSum(x){const n = Number(x) || 0; return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,' ');}
function niceDate(iso){
  const d = new Date(iso+'T00:00:00');
  const dd=String(d.getDate()).padStart(2,'0');
  const mm=String(d.getMonth()+1).padStart(2,'0');
  const yy=String(d.getFullYear());
  return `${dd}.${mm}.${yy}`;
}

/* ‚úÖ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ */
function renderWelcome(){
  const el = document.getElementById('welcomeLine');
  if(!el) return;
  const name = (tg_first_name || tg_username || '').trim();
  if(!name){ el.style.display='none'; return; }
  el.style.display='block';
  el.innerText = `${UI[lang].welcome}, ${name}!`;
}

/* apply UI texts */
function applyUI(){
  menuTitle.innerText = UI[lang].menu;

  /* VIP */
  mVipTitle.innerText = UI[lang].vipTitle;
  mVipSub.innerText = UI[lang].vipSub;
  vipToggleTitle.innerText = UI[lang].vipToggleTitle;
  vipToggleSub.innerText = UI[lang].vipToggleSub;
  vipCallBtn.innerText = UI[lang].vipCall;
  vipCloseBtn.innerText = UI[lang].vipClose;
  vipHint.innerText = UI[lang].vipHint;
  vipTable.placeholder = UI[lang].vipTablePh;

  /* Gallery */
  mGalleryTitle.innerText = UI[lang].galleryTitle;
  mGallerySub.innerText = UI[lang].gallerySub;

  /* Reviews */
  mReviewsTitle.innerText = UI[lang].reviewsTitle;
  mReviewsSub.innerText = UI[lang].reviewsSub;
  reviewsYandexBtn.innerText = UI[lang].reviewsOpenY;
  ratingAvgTxt.innerText = UI[lang].ratingAvg;
  ratingPill.innerText = `${AVG_RATING} ‚òÖ`;

  /* about */
  mAboutTitle.innerText = UI[lang].aboutTitle;
  mAboutSub.innerText   = UI[lang].aboutSub;
  aboutAddrLabel.innerText  = UI[lang].aboutAddr;
  aboutRouteBtn.innerText   = UI[lang].aboutRoute;
  aboutPhoneLabel.innerText = UI[lang].aboutPhone;
  aboutHoursLabel.innerText = UI[lang].aboutHours;
  aboutAddrText.innerText   = ABOUT_ADDR[lang] || ABOUT_ADDR.ru;
  aboutHoursText.innerText  = ABOUT_HOURS;

  const d = document.getElementById('aboutDescText');
  if(d) d.innerHTML = ABOUT_DESC[lang] || ABOUT_DESC.ru;

  /* review (yandex) */
  mReviewTitle.innerText = UI[lang].reviewTitle;
  mReviewSub.innerText   = UI[lang].reviewSub;

  mLegalTitle.innerText = UI[lang].legalTitle;
  mLegalSub.innerText = UI[lang].legalSub;
  mLegalMail.innerText = UI[lang].legalMail;
  mLegalPhone.innerText = UI[lang].legalPhone;
  mLegalChatBtn.innerText = UI[lang].legalChat;

  mCallTitle.innerText = UI[lang].callTitle;
  mInstaSub.innerText = UI[lang].instaSub;

  searchTitle.innerText = UI[lang].searchResults;

  popularTitle.innerText = UI[lang].popular;
  giftTitle.innerText = UI[lang].gift;
  comboTitle.innerText = UI[lang].combo;

  btnDelivery.innerText = UI[lang].delivery;
  btnPickup.innerText = UI[lang].pickup;

  address.placeholder = UI[lang].address;
  phone.placeholder = UI[lang].phone;

  cartTitle.innerText = UI[lang].cart;
  totalLabel.innerText = UI[lang].total;
  orderBtn.innerText = UI[lang].order;
  comment.placeholder = UI[lang].comment;

  payCash.innerText = UI[lang].cash;
  payClick.innerText = UI[lang].click;
  payOnline.innerText = UI[lang].online;

  clickTitle.innerText = UI[lang].clickTitle;
  clickHint.innerText = UI[lang].clickHint;

  sumCurrency.innerText = UI[lang].sum;
  sumWord.innerText = UI[lang].sum;
  sumWord2.innerText = UI[lang].sum;

  recipLabel.innerText = UI[lang].recip;
  cardLabel.innerText = UI[lang].card;
  copyRecip.innerText = UI[lang].copy;
  copyCard.innerText = UI[lang].copy;
  onlineHint.innerText = UI[lang].onlineHint;

  stickyCartBtn.innerText = UI[lang].cart;

  clickQrImg.src = CLICK_QR_IMG;

  renderWelcome();
  renderGallery();
  renderReviews();

  renderCats();
  if(!isSearchOpen()) renderProducts();
  renderPopular(); renderGift();
  renderComboGroups();

  updateTotal();
  setTimeout(syncStickyHeight, 50);
}

/* header actions */
function openTopMenu(){ closeSearch(); menuBackdrop.classList.add('show'); menuSheet.classList.add('show'); }
function closeTopMenu(){ menuBackdrop.classList.remove('show'); menuSheet.classList.remove('show'); }

function openRoute(){ try{Telegram.WebApp.openLink(MAP_URL);}catch(_){window.open(MAP_URL,'_blank');} }
function openRouteFromAbout(e){
  try{e.preventDefault();e.stopPropagation();}catch(_){}
  openRoute();
}

function callPhone(e){ try{e.preventDefault();e.stopPropagation();}catch(_){}
  try{Telegram.WebApp.openLink(PHONE1_TEL);}catch(_){window.location.href=PHONE1_TEL;}
}
function callPhone2(e){ try{e.preventDefault();e.stopPropagation();}catch(_){}
  try{Telegram.WebApp.openLink(PHONE2_TEL);}catch(_){window.location.href=PHONE2_TEL;}
}
function openMail(e){ try{e.preventDefault();e.stopPropagation();}catch(_){}
  const url="mailto:arba.restaurant@gmail.com";
  try{Telegram.WebApp.openLink(url);}catch(_){window.location.href=url;}
}
function toggleLegal(){
  const w=document.getElementById('legalWrap');
  w.style.display=(w.style.display==='none'||!w.style.display)?'block':'none';
}
function toggleAbout(){
  const w=document.getElementById('aboutWrap');
  w.style.display=(w.style.display==='none'||!w.style.display)?'block':'none';
}
function openManagerChat(e){
  try{e.preventDefault();e.stopPropagation();}catch(_){}
  const url=`https://t.me/user?id=${ADMIN_ID}`;
  try{Telegram.WebApp.openLink(url);}catch(_){window.open(url,'_blank');}
}

/* ‚úÖ –æ—Ç–∑—ã–≤: –æ—Ç–∫—Ä—ã–≤–∞–µ–º —Å—Å—ã–ª–∫—É */
function openYandexReviews(e){
  try{e.preventDefault();e.stopPropagation();}catch(_){}
  closeTopMenu();
  try{Telegram.WebApp.openLink(YANDEX_REVIEWS_URL);}catch(_){window.open(YANDEX_REVIEWS_URL,'_blank');}
}

function openInstagram(e){
  try{e.preventDefault();e.stopPropagation();}catch(_){}
  closeTopMenu();
  try{Telegram.WebApp.openLink(INSTA_URL);}catch(_){window.open(INSTA_URL,'_blank');}
}

/* image modal */
function openImage(e,id){
  try{e.preventDefault();e.stopPropagation();}catch(_){}
  const it=ITEM_INDEX[id];
  imgModalTitle.innerText=nameOf(id);
  imgModalImg.src=it?.img||'images/logo.png';
  imgModalImg.onerror=function(){this.onerror=null;this.src='images/logo.png';};
  imgModal.classList.add('show');
}
function openGalleryImage(e, title, src){
  try{e.preventDefault();e.stopPropagation();}catch(_){}
  imgModalTitle.innerText = title || '–§–æ—Ç–æ';
  imgModalImg.src = src || 'images/logo.png';
  imgModalImg.onerror=function(){this.onerror=null;this.src='images/logo.png';};
  imgModal.classList.add('show');
}
function closeImgModal(e){
  try{e.preventDefault();e.stopPropagation();}catch(_){}
  imgModal.classList.remove('show');
  imgModalImg.src='';
}

/* search */
function isSearchOpen(){ return searchWrap.classList.contains('show'); }
function toggleSearch(){ isSearchOpen()?closeSearch():openSearch(); }
function openSearch(){
  searchWrap.classList.add('show');
  searchTitle.classList.add('show');
  searchInput.value='';
  searchInput.focus();
  searchProducts();
}
function closeSearch(){
  searchWrap.classList.remove('show');
  searchTitle.classList.remove('show');
  searchInput.value='';
  renderProducts();
}
function clearSearch(){ closeSearch(); }
function onSearchKey(e){ if(e.key==='Enter') closeSearch(); }

function matchesQuery(it,q){
  if(!q) return true;
  const all=[it.n?.ru,it.n?.uz,it.n?.en,it.n?.tr,String(it.id||'')].filter(Boolean).join(' ').toLowerCase();
  return all.includes(q);
}
function searchProducts(){
  const q=(searchInput.value||'').trim().toLowerCase();
  products.innerHTML='';
  if(!q){ renderProducts(); return; }

  let found=0;
  for(const c in MENU){
    MENU[c].forEach(it=>{
      if(matchesQuery(it,q)){
        cart[it.id]=cart[it.id]||0;
        products.innerHTML += cardHTML(it);
        found++;
      }
    });
  }
  if(found===0){
    products.innerHTML=`<div style="grid-column:1/-1;text-align:center;padding:18px;font-weight:900;opacity:.9;background:rgba(255,255,255,.10);border:1px solid rgba(255,255,255,.18);border-radius:18px;">
      ${lang==='ru'?'–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ':lang==='uz'?'Hech narsa topilmadi':lang==='tr'?'Sonu√ß bulunamadƒ±':'Nothing found'}
    </div>`;
  }
}

/* carousels */
function popCardHTML(it,label){
  const id=it.id;
  return `
  <div class="pop-card" onclick="onCardClick(event,'${id}')">
    <div class="badge-pill">${escapeHtml(label)}</div>
    <div class="pop-img" onclick="openImage(event,'${id}')"><img src="${it.img}" onerror="this.src='images/logo.png'"></div>
    <div class="pop-name">${escapeHtml(nameOf(id))}</div>
    <div class="pop-price">${formatSum(it.p)} <small>${UI[lang].sum}</small></div>
    <div class="pop-counter">
      <button type="button" onclick="chgFrom(event,'${id}',-1)">‚àí</button>
      <span id="pc_${id}">${cart[id]||0}</span>
      <button type="button" onclick="chgFrom(event,'${id}',1)">+</button>
    </div>
  </div>`;
}
function miniCardHTML(it,label){
  const id=it.id;
  return `
  <div class="mini-card" onclick="onCardClick(event,'${id}')">
    <div class="badge-pill">${escapeHtml(label)}</div>
    <div class="mini-img" onclick="openImage(event,'${id}')"><img src="${it.img}" onerror="this.src='images/logo.png'"></div>
    <div class="mini-name">${escapeHtml(nameOf(id))}</div>
    <div class="mini-price">${formatSum(it.p)} <small>${UI[lang].sum}</small></div>
    <div class="mini-counter">
      <button type="button" onclick="chgFrom(event,'${id}',-1)">‚àí</button>
      <span id="mc_${id}">${cart[id]||0}</span>
      <button type="button" onclick="chgFrom(event,'${id}',1)">+</button>
    </div>
  </div>`;
}
function renderPopular(){
  popularRow.innerHTML='';
  POPULAR.forEach(id=>{
    const it=ITEM_INDEX[id]; if(!it) return;
    cart[id]=cart[id]||0;
    popularRow.innerHTML += popCardHTML(it,'–ü–æ–ø—É–ª—è—Ä–Ω–æ–µ');
  });
}
function renderGift(){
  giftRow.innerHTML='';
  GIFT_ITEMS.forEach(id=>{
    const it=ITEM_INDEX[id]; if(!it) return;
    cart[id]=cart[id]||0;
    giftRow.innerHTML += miniCardHTML(it,'–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º');
  });
}

/* ‚úÖ –ß–∞—Å—Ç–æ –±–µ—Ä—É—Ç –≤–º–µ—Å—Ç–µ ‚Äî –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞—Ä—É—Å–µ–ª–µ–π */
function isAnyInCart(ids){
  for(const id of ids){
    if((cart[id]||0) > 0) return true;
  }
  return false;
}
function hasCategoryInCart(catName){
  for(const id in cart){
    if((cart[id]||0) > 0 && ITEM_CAT[id] === catName) return true;
  }
  return false;
}
function pickFirstExisting(ids){
  for(const id of ids){
    if(ITEM_INDEX[id]) return id;
  }
  return null;
}
function pickSeveral(ids, limit){
  const out=[];
  for(const id of ids){
    if(ITEM_INDEX[id] && (cart[id]||0)===0) out.push(id);
    if(out.length>=limit) break;
  }
  return out;
}
function uniq(ids){
  const seen=new Set();
  const out=[];
  for(const id of ids){
    if(seen.has(id)) continue;
    seen.add(id);
    out.push(id);
  }
  return out;
}
function buildComboGroups(){
  const groups = [];
  const hasHotOrGrill = hasCategoryInCart('grill') || hasCategoryInCart('hot') || isAnyInCart(['hot_iskender_kebab','grill_adana_kebab','grill_urfa_kebab','grill_chicken_shashlik','grill_chicken_wings']);

  // 1) –ù–∞–ø–∏—Ç–∫–∏ –∫ –±–ª—é–¥–∞–º
  if(hasHotOrGrill || hasCategoryInCart('pide') || hasCategoryInCart('steak')){
    const drinkIds = pickSeveral(['drink_ayran_05','drink_cola_05','drink_fanta_05','drink_water_05','drink_ayran_1','drink_cola_033'], 8);
    if(drinkIds.length) groups.push({title:UI[lang].comboDrink, label:'–ù–∞–ø–∏—Ç–æ–∫', ids:drinkIds});
  }

  // 2) –ö –±–ª—é–¥—É –¥–æ–±–∞–≤—å—Ç–µ (—Å–∞–ª–∞—Ç—ã/–∑–∞–∫—É—Å–∫–∏)
  if(hasCategoryInCart('steak') || hasCategoryInCart('hot') || hasCategoryInCart('grill')){
    const sideIds = pickSeveral(['salad_greek','salad_coban','salad_ezme','salad_haydari','salad_baklajon_yogurt','salad_crispy_eggplant'], 8);
    if(sideIds.length) groups.push({title:UI[lang].comboSide, label:'–ö –±–ª—é–¥—É', ids:sideIds});
  }

  // 3) –ï—â—ë —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º (–ø–∏–¥–µ/—Å—É–ø)
  if(hasCategoryInCart('soups') || hasCategoryInCart('salads') || hasCategoryInCart('pide')){
    const moreIds = pickSeveral(['pide_lahmacun','pide_cheese','pide_meat','soup_ezogelin','soup_lentil_cream','pide_mix'], 8);
    if(moreIds.length) groups.push({title:UI[lang].comboMore, label:'–°–æ–≤–µ—Ç', ids:moreIds});
  }

  // –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ –≤ –∫–æ—Ä–∑–∏–Ω–µ ‚Äî –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º
  if(calcItemsSum()===0) return [];

  // –ø–æ–¥—á–∏—Å—Ç–∫–∞ –æ—Ç –ø—É—Å—Ç—ã—Ö
  return groups.filter(g=>g.ids && g.ids.length);
}
function renderComboGroups(){
  const wrap = document.getElementById('comboWrap');
  const box  = document.getElementById('comboGroups');
  if(!wrap || !box) return;

  const groups = buildComboGroups();
  if(groups.length === 0){
    wrap.style.display = 'none';
    box.innerHTML = '';
    return;
  }

  wrap.style.display = 'block';
  box.innerHTML = '';

  groups.forEach((g,idx)=>{
    const rowId = `comboRow_${idx}`;
    box.innerHTML += `
      <div class="combo-subtitle">${escapeHtml(g.title)} <small>‚Ä¢</small> <small>${g.ids.length}</small></div>
      <div class="mini-row" id="${rowId}"></div>
    `;
    const row = document.getElementById(rowId);
    g.ids.forEach(id=>{
      const it = ITEM_INDEX[id]; if(!it) return;
      cart[id]=cart[id]||0;
      row.innerHTML += miniCardHTML(it, g.label);
    });
  });

  setTimeout(syncStickyHeight, 10);
}

function onCardClick(e,id){
  if(e?.target?.closest?.('button')) return;
  if(e?.target?.closest?.('.pop-img, .mini-img')) return;
  chg(id,1);
}
function chgFrom(e,id,delta){
  e?.preventDefault?.(); e?.stopPropagation?.();
  chg(id,delta);
}
function syncCounters(id){
  const a=document.getElementById('pc_'+id); if(a) a.innerText=cart[id]||0;
  const b=document.getElementById('mc_'+id); if(b) b.innerText=cart[id]||0;
  const c=document.getElementById('c_'+id);  if(c) c.innerText=cart[id]||0;
}
function calcItemsSum(){
  let s=0;
  for(const id in cart) s += (cart[id]||0) * (ITEM_INDEX[id]?.p||0);
  return s;
}
function calcDeliveryFee(){ return 0; }
function updateTotal(){
  const itemsSum=calcItemsSum();
  const dfee=calcDeliveryFee();
  const grand=itemsSum+dfee;
  total.innerText=formatSum(itemsSum);
  grandTotal.innerText=formatSum(grand);
  stickyTotal.innerText=formatSum(grand);
}
function chg(id,delta){
  cart[id]=Math.max(0,(cart[id]||0)+delta);
  syncCounters(id);
  updateTotal();
  renderComboGroups();
}

/* categories */
function renderCats(){
  cats.innerHTML='';
  for(const k in MENU){
    cats.innerHTML += `<button class="btn cat-btn ${k===category?'active':''}" onclick="onCategoryClick('${k}')">${CATS[lang][k]||k}</button>`;
  }
}
function onCategoryClick(k){
  category=k;
  renderCats();
  if(!isSearchOpen()) renderProducts();
}

/* products */
function cardHTML(it){
  const id=it.id;
  const qty=cart[id]||0;
  return `
  <div class="card">
    <div class="img"><img src="${it.img}" onerror="this.src='images/logo.png'" onclick="openImage(event,'${id}')"></div>
    <div class="item-name">${escapeHtml(nameOf(id))}</div>
    <div class="price">${formatSum(it.p)} <small>${UI[lang].sum}</small></div>
    <div class="counter">
      <button onclick="chg('${id}',-1)">‚àí</button>
      <span id="c_${id}">${qty}</span>
      <button onclick="chg('${id}',1)">+</button>
    </div>
  </div>`;
}
function renderProducts(){
  products.innerHTML='';
  (MENU[category]||[]).forEach(it=>{
    cart[it.id]=cart[it.id]||0;
    products.innerHTML += cardHTML(it);
  });
}

/* types / payments */
function setType(t,btn){
  type=t;
  document.querySelectorAll('.types .btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  address.style.display = (type==='pickup') ? 'none' : 'block';
  updateTotal();
}
function setPayment(p){
  payment=p;
  payCash.classList.toggle('active', p==='cash');
  payClick.classList.toggle('active', p==='click');
  payOnline.classList.toggle('active', p==='online');
  onlineBox.style.display = (p==='online') ? 'block' : 'none';
  clickBox.style.display  = (p==='click')  ? 'block' : 'none';
}
function openCart(){
  const el=document.getElementById('cartBox');
  syncStickyHeight();
  try{ el.scrollIntoView({behavior:'smooth', block:'start'}); }catch(_){}
}

/* ‚úÖ VIP / Gallery / Reviews toggles */
let inHall = (localStorage.getItem('arba_in_hall')||'0')==='1';
function toggleVip(e){
  try{e?.preventDefault?.();e?.stopPropagation?.();}catch(_){}
  const w=document.getElementById('vipWrap');
  w.style.display=(w.style.display==='none'||!w.style.display)?'block':'none';
  syncVipUI();
}
function toggleInHall(){
  inHall = !inHall;
  localStorage.setItem('arba_in_hall', inHall ? '1' : '0');
  syncVipUI();
}
function syncVipUI(){
  const sw = document.getElementById('vipSwitch');
  if(sw) sw.classList.toggle('on', !!inHall);
  const btn = document.getElementById('vipCallBtn');
  if(btn){
    btn.style.opacity = inHall ? '1' : '.45';
    btn.style.pointerEvents = inHall ? 'auto' : 'none';
  }
}
function callWaiter(e){
  try{e.preventDefault();e.stopPropagation();}catch(_){}
  if(!inHall) return;
  const table = (document.getElementById('vipTable')?.value || '').trim();
  const payload = {
    action:'call_waiter',
    brand:'ARBA ISTANBUL RESTAURANT',
    tg:{id:tg_id,username:tg_username,first_name:tg_first_name},
    table: table || null,
    time: new Date().toISOString()
  };
  try{
    Telegram.WebApp.HapticFeedback?.notificationOccurred?.('success');
    Telegram.WebApp.sendData(JSON.stringify(payload));
    // –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    showToast(lang==='ru'?'‚úÖ –û—Ñ–∏—Ü–∏–∞–Ω—Ç –≤—ã–∑–≤–∞–Ω':lang==='uz'?'‚úÖ Ofitsiant chaqirildi':lang==='tr'?'‚úÖ Garson √ßaƒürƒ±ldƒ±':'‚úÖ Waiter called');
  }catch(_){
    showToast('‚úÖ');
  }
}

/* ‚úÖ –ª—ë–≥–∫–∏–π toast —á–µ—Ä–µ–∑ popup */
let toastTimer=null;
function showToast(t){
  popup.classList.add('show');
  popupText.innerText = t || "‚úÖ";
  clearTimeout(toastTimer);
  toastTimer=setTimeout(()=>popup.classList.remove('show'), 1200);
}

/* Gallery */
function toggleGallery(e){
  try{e?.preventDefault?.();e?.stopPropagation?.();}catch(_){}
  const w=document.getElementById('galleryWrap');
  w.style.display=(w.style.display==='none'||!w.style.display)?'block':'none';
}
function renderGallery(){
  const grid = document.getElementById('galleryGrid');
  if(!grid) return;
  grid.innerHTML='';
  GALLERY.forEach(g=>{
    const title = (g.t && (g.t[lang]||g.t.ru)) ? (g.t[lang]||g.t.ru) : g.id;
    grid.innerHTML += `
      <div class="gallery-tile" onclick="openGalleryImage(event,'${escapeHtml(title)}','${g.img}')">
        <img src="${g.img}" onerror="this.src='images/logo.png'">
        <div class="gallery-cap">${escapeHtml(title)}</div>
      </div>
    `;
  });
}

/* Reviews */
function toggleReviews(e){
  try{e?.preventDefault?.();e?.stopPropagation?.();}catch(_){}
  const w=document.getElementById('reviewsWrap');
  w.style.display=(w.style.display==='none'||!w.style.display)?'block':'none';
}
function renderReviews(){
  const list = document.getElementById('reviewsList');
  if(!list) return;
  list.innerHTML='';
  (REVIEWS||[]).slice(0,3).forEach(r=>{
    const text = (r.text && (r.text[lang]||r.text.ru)) ? (r.text[lang]||r.text.ru) : '';
    list.innerHTML += `
      <div class="rev-card">
        <div class="rev-top">
          <div class="rev-name">${escapeHtml(r.name||'')}</div>
          <div class="rev-stars">${'‚òÖ'.repeat(Math.max(0,Math.min(5,Number(r.stars||0))))}</div>
        </div>
        <div class="rev-text">${escapeHtml(text)}</div>
        <div class="rev-date">${escapeHtml(niceDate(r.date||''))}</div>
      </div>
    `;
  });
}

/* order */
function genOrderId(){
  const d=new Date();
  const dd=String(d.getDate()).padStart(2,'0');
  const mm=String(d.getMonth()+1).padStart(2,'0');
  const key=`arba_seq_${d.getFullYear()}${mm}${dd}`;
  let n=Number(localStorage.getItem(key)||0)+1;
  localStorage.setItem(key,String(n));
  return `ARBA-${dd}${mm}-${String(n).padStart(3,'0')}`;
}
function sendOrder(){
  const items=[];
  for(const id in cart){
    const qty=Number(cart[id]||0);
    if(qty>0){
      const it=ITEM_INDEX[id]||{};
      items.push({id,qty,price:it.p||0,name_ru:it.n?.ru||id,name_lang:nameOf(id)});
    }
  }
  if(items.length===0){
    alert(UI[lang].empty);
    return;
  }

  popup.classList.add('show');
  popupText.innerText = "‚úÖ";

  const itemsSum=calcItemsSum();
  const dfee=calcDeliveryFee();
  const grand=itemsSum+dfee;

  const payload={
    action:'order',
    tg:{id:tg_id,username:tg_username,first_name:tg_first_name},
    items,
    total_items: formatSum(itemsSum),
    delivery_fee: dfee,
    total_with_delivery: formatSum(grand),
    total_num: grand,
    payment,
    type,
    address:(type==='pickup'?'':address.value),
    phone:phone.value,
    comment:comment.value,
    order_id: genOrderId(),
    lang,
    brand:'ARBA ISTANBUL RESTAURANT'
  };

  setTimeout(()=>{
    Telegram.WebApp.sendData(JSON.stringify(payload));
    Telegram.WebApp.close();
  },700);
}

/* theme */
try{
  Telegram.WebApp.setHeaderColor?.('#8B0E13');
  Telegram.WebApp.setBackgroundColor?.('#8B0E13');
}catch(_){}

/* init */
address.value = localStorage.getItem('arba_address') || '';
phone.value = localStorage.getItem('arba_phone') || PHONE1_DISPLAY;
address.addEventListener('input',()=>localStorage.setItem('arba_address',address.value));
phone.addEventListener('input',()=>localStorage.setItem('arba_phone',phone.value));

function setLang(l,btn){
  lang=l;
  document.querySelectorAll('.langs .btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  applyUI();
}

/* start state */
renderPopular(); renderGift();
renderCats(); renderProducts();

/* ‚úÖ —Å—Ç–∞—Ä—Ç: —É–∑–±–µ–∫—Å–∫–∏–π + —Å–∞–º–æ–≤—ã–≤–æ–∑ */
applyUI();
setPayment('cash');

/* –≤—ã—Å—Ç–∞–≤–ª—è–µ–º —Å–∞–º–æ–≤—ã–≤–æ–∑ */
type='pickup';
btnPickup.classList.add('active');
btnDelivery.classList.remove('active');
address.style.display='none';

/* –≤—ã—Å—Ç–∞–≤–ª—è–µ–º —è–∑—ã–∫ uz (–∏ –ø–æ–¥—Å–≤–µ—Ç–∫—É –∫–Ω–æ–ø–∫–∏) */
lang='uz';
document.querySelectorAll('.langs .btn').forEach(b=>b.classList.remove('active'));
const uzBtn = document.getElementById('langUZ');
if(uzBtn) uzBtn.classList.add('active');
applyUI();

updateTotal();
setTimeout(syncStickyHeight, 50);

/* search –∑–∞–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
closeSearch();

/* VIP saved state */
syncVipUI();

/* ‚úÖ –ø–æ–∫–∞–∑–∞—Ç—å Splash –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ */
setTimeout(()=>{ showSplash(); }, 150);
</script>
</body>
</html>
